(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03f1364c"],{2934:function(t,e,a){"use strict";a.d(e,"b",function(){return r}),a.d(e,"a",function(){return n}),a.d(e,"d",function(){return i}),a.d(e,"c",function(){return c});var o=a("6b6c"),r=function(){return o["a"].request({url:"/project/getCity.action",method:"get"})},n=function(t){return o["a"].request({url:"/project/getAreaByCity.action",method:"get",params:{cityCode:t}})},i=function(t){return o["a"].request({url:"/system/requestExportFile.action",method:"post",data:t})},c=function(t){return o["a"].request({url:"/system/getExportProcess",method:"get",params:{key:t}})}},3989:function(t,e,a){"use strict";var o=a("9496"),r=a.n(o);r.a},"7d11":function(t,e,a){},9496:function(t,e,a){},bb7f:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("project-form",{on:{search:t.listProject,create:t.addProject}}),a("Table",{staticClass:"my-table",attrs:{stripe:"",columns:t.columns,data:t.projectList,loading:t.loading},scopedSlots:t._u([{key:"period",fn:function(e){var o=e.row;return[a("div",[t._v(t._s(t._f("periodFormatter")(o.period)))])]}},{key:"projectType",fn:function(e){var o=e.row;return[a("div",[t._v(t._s(t._f("projectTypeFormatter")(o.projectType)))])]}},{key:"count",fn:function(e){var o=e.row;return[a("div",[t._v(t._s(o.roomCount)+" / "+t._s(o.bedCount))])]}},{key:"isValid",fn:function(e){var o=e.row;return[a("div",[t._v(t._s(1===o.isValid?"启用":"停用"))])]}},{key:"action",fn:function(e){var o=e.row;return[a("a",{staticClass:"my-btn",on:{click:function(e){t.validOrNot(o)}}},[t._v(t._s(0===o.isValid?"启用":"停用"))]),1===o.isValid?a("a",{staticClass:"my-btn",on:{click:function(e){t.showOrNot(o)}}},[t._v(t._s(0===o.isShow?"展示":"隐藏"))]):t._e(),1===o.isValid&&1===o.isShow?a("a",{staticClass:"my-btn",on:{click:function(e){t.canOrderOrNot(o)}}},[t._v(t._s(0===o.canOrder?"开放预定":"禁止预定"))]):t._e(),a("a",{on:{click:function(e){t.toUpdateProject(o.bid)}}},[t._v("修改")])]}}])})],1)},r=[],n=(a("f751"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Form",{attrs:{model:t.paramDto,"label-width":70},nativeOn:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.submit(e):null}}},[a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"城市"}},[a("Select",{attrs:{placeholder:"",clearable:""},model:{value:t.paramDto.cityCode,callback:function(e){t.$set(t.paramDto,"cityCode",e)},expression:"paramDto.cityCode"}},t._l(t.cityOptions,function(t){return a("Option",{key:t.cityCode,attrs:{label:t.cityName,value:t.cityCode}})}))],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"区域"}},[a("Select",{attrs:{placeholder:"区域",clearable:"","no-data-text":"请先选择城市"},model:{value:t.paramDto.areaCode,callback:function(e){t.$set(t.paramDto,"areaCode",e)},expression:"paramDto.areaCode"}},t._l(t.areaOptions,function(t){return a("Option",{key:t.areaCode,attrs:{label:t.areaName,value:t.areaCode}})}))],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"状态"}},[a("Select",{attrs:{placeholder:"",clearable:""},model:{value:t.paramDto.isValid,callback:function(e){t.$set(t.paramDto,"isValid",e)},expression:"paramDto.isValid"}},t._l(t.isValidOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1)],1),a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"类型"}},[a("Select",{attrs:{placeholder:"",clearable:""},model:{value:t.paramDto.projectType,callback:function(e){t.$set(t.paramDto,"projectType",e)},expression:"paramDto.projectType"}},t._l(t.typeOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"名称"}},[a("Input",{attrs:{placeholder:"",clearable:""},model:{value:t.paramDto.projectName,callback:function(e){t.$set(t.paramDto,"projectName","string"===typeof e?e.trim():e)},expression:"paramDto.projectName"}})],1)],1)],1),a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{span:"12"}},[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.submit}},[t._v(" 查 询")])],1),a("Col",{staticStyle:{"text-align":"right"},attrs:{span:"12"}},[a("Button",{attrs:{type:"primary"},on:{click:t.create}},[t._v(" 新增项目")])],1)],1)],1)}),i=[],c=a("2934"),s={name:"projectForm",data:function(){return{paramDto:{cityCode:"",areaCode:"",isValid:"",projectType:"",projectName:""},cityOptions:[],areaOptions:[],isValidOptions:[{label:"启用",value:1},{label:"停用",value:0}],typeOptions:[{label:"直营",value:1},{label:"托管",value:2}]}},methods:{getCity:function(){var t=this;Object(c["b"])().then(function(e){t.cityOptions=e.body})},getAreaList:function(){var t=this;Object(c["a"])(this.paramDto.cityCode).then(function(e){t.areaOptions=e.body})},submit:function(){this.$emit("search",this.paramDto)},create:function(){this.$emit("create")}},watch:{"paramDto.cityCode":function(t){this.paramDto.areaCode="",t?this.getAreaList():this.areaOptions=[]}},created:function(){this.getCity(),this.submit()}},l=s,u=(a("3989"),a("2877")),p=Object(u["a"])(l,n,i,!1,null,"4a523db8",null);p.options.__file="projectForm.vue";var d=p.exports,m=a("24d2"),f={name:"projectList",components:{projectForm:d},data:function(){return{paramDto:{pageNum:1,pageSize:100},loading:!1,projectList:[],total:0,columns:[{title:"序号",type:"index",width:60},{title:"项目名称",key:"projectName"},{title:"阶段",slot:"period"},{title:"类型",slot:"projectType"},{title:"地址",key:"projectAddress",tooltip:!0},{title:"房间数/床位数",slot:"count"},{title:"状态",slot:"isValid"},{title:"操作",slot:"action",width:190}]}},methods:{listProject:function(t){var e=this;this.loading=!0,Object.assign(this.paramDto,t),Object(m["j"])(this.paramDto).then(function(t){e.projectList=t.body.rows,e.total=t.body.total,e.loading=!1}).catch(function(){e.loading=!1})},addProject:function(){var t={name:"addProject"};this.$router.push(t)},validOrNot:function(t){var e=this,a=0,o="";1===t.isValid?(a=0,o="停用后，将无法在App等渠道显示，并暂停所有订单，已下订单也将无法操作，请确认是否继续？"):(a=1,o="启用后，项目可正常使用，请确认是否继续？"),this.$Modal.confirm({title:"通知",content:"<p>"+o+"</p>",onOk:function(){Object(m["o"])(t.bid,a).then(function(t){e.$Message.success("操作成功"),e.handlePageChange()})},onCancel:function(){}})},showOrNot:function(t){var e=this,a=0,o="";1===t.isShow?(a=0,o="隐藏后，App端无法看到该项目，不影响已创建的订单，请确认是否继续？"):(a=1,o="展示后，App端可以看到该项目，请确认是否继续？"),this.$Modal.confirm({title:"通知",content:"<p>"+o+"</p>",onOk:function(){Object(m["m"])(t.bid,a).then(function(t){e.$Message.success("操作成功"),e.handlePageChange()})},onCancel:function(){}})},canOrderOrNot:function(t){var e=this,a=0,o="";1===t.canOrder?(a=0,o="禁止App端预定床位，但是App端可以浏览该项目，请确认是否继续？"):(a=1,o="允许App端预定床位，请确认是否继续？"),this.$Modal.confirm({title:"通知",content:"<p>"+o+"</p>",onOk:function(){Object(m["a"])(t.bid,a).then(function(t){e.$Message.success("操作成功"),e.handlePageChange()})},onCancel:function(){}})},toUpdateProject:function(t){var e={name:"updateProject",query:{projectBid:t}};this.$router.push(e)}},filters:{periodFormatter:function(t){switch(t){case"1":return"工程";case"2":return"爬坡";case"3":return"运营"}},projectTypeFormatter:function(t){switch(t){case"1":return"直营";case"2":return"托管";case"3":return"平台"}}}},h=f,y=(a("c283"),Object(u["a"])(h,o,r,!1,null,"17b7e868",null));y.options.__file="projectList.vue";e["default"]=y.exports},c283:function(t,e,a){"use strict";var o=a("7d11"),r=a.n(o);r.a}}]);