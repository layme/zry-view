(window['webpackJsonp'] = window['webpackJsonp'] || []).push([['chunk-4a2fba4d'], { '6c81': function (t, e, a) { 'use strict'; a.r(e); var r = function () { var t = this, e = t.$createElement, a = t._self._c || e; return a('div', [a('Form', { attrs: { model: t.paramDto, 'label-width': 80, inline: '' } }, [a('FormItem', { attrs: { label: '指标周期' } }, [a('Select', { staticClass: 'my-input', attrs: { placeholder: '' }, model: { value: t.paramDto.cycleType, callback: function (e) { t.$set(t.paramDto, 'cycleType', e) }, expression: 'paramDto.cycleType' } }, t._l(t.cycleTypeOptions, function (t) { return a('Option', { key: t.value, attrs: { label: t.label, value: t.value } }) }))], 1), a('FormItem', { attrs: { label: '月份选择' } }, [a('DatePicker', { staticClass: 'my-input', attrs: { type: 'month', placeholder: '', clearable: !1 }, model: { value: t.paramDto.date, callback: function (e) { t.$set(t.paramDto, 'date', e) }, expression: 'paramDto.date' } })], 1), a('FormItem', [a('Button', { attrs: { type: 'primary', icon: 'ios-search' }, on: { click: t.getData } }, [t._v(' 查 询')])], 1), a('Row', [a('FormItem', { attrs: { label: '数据周期' } }, [a('div', [t._v(t._s(t.dateRange))])])], 1)], 1), a('div', [t.loading ? a('Spin', { staticClass: 'full-spin', attrs: { size: 'large', fix: '' } }) : t._e(), a('Card', { staticClass: 'my-card' }, [a('p', { attrs: { slot: 'title' }, slot: 'title' }, [t._v('核心指标达成情况')]), a('Table', { attrs: { columns: t.coreColumns, data: t.coreData, border: '' }, scopedSlots: t._u([{ key: 'type', fn: function (e) { var r = e.row; return [r.type === 1 ? a('Tag', { attrs: { color: 'blue' } }, [t._v('运营期')]) : a('Tag', { attrs: { color: 'green' } }, [t._v('销售期')])] } }]) })], 1), a('Card', { staticClass: 'my-card my-card-top' }, [a('p', { attrs: { slot: 'title' }, slot: 'title' }, [t._v('OCC')]), a('Table', { attrs: { columns: t.occColumns, data: t.occData } }), a('chart-line', { staticClass: 'my-chart', attrs: { 'line-data': t.occLineData, text: 'occ走势图' } })], 1), a('Card', { staticClass: 'my-card my-card-top' }, [a('p', { attrs: { slot: 'title' }, slot: 'title' }, [t._v('新订分析')]), a('Table', { attrs: { columns: t.newColumns, data: t.newData } }), a('chart-line', { staticClass: 'my-chart', attrs: { 'line-data': t.orderLineData, text: '订单走势图' } }), a('chart-line', { staticClass: 'my-chart', attrs: { 'line-data': t.nightLineData, text: '间夜走势图' } })], 1)], 1)], 1) }, n = [], o = a('6b6c'), i = function (t) { return o['a'].request({ url: '/reportOperation/getReportCore.action', method: 'get', params: t }) }, c = function (t) { return o['a'].request({ url: '/reportOperation/getReportCoreOCC.action', method: 'get', params: t }) }, l = function (t) { return o['a'].request({ url: '/reportOperation/getLineReportCoreOCC.action', method: 'get', params: t }) }, s = function (t) { return o['a'].request({ url: '/reportOperation/getMonthNewOrderCount.action', method: 'get', params: t }) }, d = function (t) { return o['a'].request({ url: '/reportOperation/getChartNewOrderCount.action', method: 'get', params: t }) }, u = a('90de'), p = a('c9ae'), h = { name: 'operationIndex', components: { ChartLine: p['a'] }, data: function () { return { paramDto: { cycleType: '2', date: new Date(), startDate: new Date() }, cycleTypeOptions: [{ label: '月指标', value: '2' }], loading: !1, coreData: [], coreColumns: [{ title: '项目', key: 'projectNames' }, { title: '项目阶段', slot: 'type', align: 'center' }, { title: '床位数', align: 'center', children: [{ title: '实际值', key: 'bedCount', align: 'center' }] }, { title: 'OCC', align: 'center', children: [{ title: '目标值', key: 'occGoal', align: 'center', render: function (t, e) { return t('div', e.row.occGoal === -1 ? '-%' : ''.concat(e.row.occGoal, '%')) } }, { title: '实际值', key: 'occ', align: 'center', render: function (t, e) { return t('div', ''.concat(e.row.occ, '%')) } }] }, { title: 'ADR', align: 'center', children: [{ title: '目标值', key: 'ardGoal', align: 'center', render: function (t, e) { return t('div', e.row.ardGoal === -1 ? '-' : e.row.ardGoal) } }, { title: '实际值', key: 'ard', align: 'center' }] }, { title: 'RevPAR', align: 'center', children: [{ title: '目标值', key: 'revParGoal', align: 'center', render: function (t, e) { return t('div', e.row.revParGoal === -1 ? '-' : e.row.revParGoal) } }, { title: '实际值', key: 'revPar', align: 'center' }] }], occData: [], occColumns: [{ title: '项目', key: 'projectName' }, { title: '目标值', key: 'occGoal', align: 'center', render: function (t, e) { return t('div', e.row.occGoal === -1 ? '-%' : ''.concat(e.row.occGoal, '%')) } }, { title: '实际值', key: 'occ', align: 'center', render: function (t, e) { return t('div', ''.concat(e.row.occ, '%')) } }], occLineData: {}, newData: [], newColumns: [{ title: '渠道', key: 'firstChannelName' }, { title: '本月订单', key: 'orderCount', align: 'center' }, { title: '本月间夜', key: 'nightCount', align: 'center' }], newLineData: {} } }, computed: { dateRange: function () { var t = new Date(), e = this.paramDto.date; if (t.getFullYear() === e.getFullYear() && t.getMonth() === e.getMonth()) return t.setDate(1), ''.concat(Object(u['d'])(t, 'date'), ' 至 ').concat(Object(u['d'])(new Date(), 'date')); var a = e; a.setDate(1); var r = e.getMonth(), n = ++r, o = new Date(e.getFullYear(), n, 1), i = 864e5; return ''.concat(Object(u['d'])(a, 'date'), ' 至 ').concat(Object(u['d'])(new Date(o - i), 'date')) }, orderLineData: function () { return { legendData: this.newLineData.legendData, xAxis: this.newLineData.xAxis, orderSeries: this.newLineData.orderSeries } }, nightLineData: function () { return { legendData: this.newLineData.legendData, xAxis: this.newLineData.xAxis, orderSeries: this.newLineData.nightSeries } } }, methods: { getData: function () { this.paramDto.date.setDate(1), this.paramDto.startDate = Object(u['d'])(this.paramDto.date, 'date'), this.getReportCore(), this.getReportCoreOCC(), this.getLineReportCoreOCC(), this.getMonthNewOrderCount(), this.getChartNewOrderCount() }, getReportCore: function () { var t = this; this.loading = !0, i(this.paramDto).then(function (e) { t.coreData = e.body, t.loading = !1 }).catch(function () { t.loading = !1 }) }, getReportCoreOCC: function () { var t = this; c(this.paramDto).then(function (e) { t.occData = e.body }) }, getLineReportCoreOCC: function () { var t = this; l(this.paramDto).then(function (e) { t.occLineData = e.body }) }, getMonthNewOrderCount: function () { var t = this; s(this.paramDto).then(function (e) { t.newData = e.body }) }, getChartNewOrderCount: function () { var t = this; d(this.paramDto).then(function (e) { t.newLineData = e.body }) } }, created: function () { this.getData() } }, m = h, g = (a('adc7'), a('2877')), D = Object(g['a'])(m, r, n, !1, null, '107999c5', null); D.options.__file = 'operationIndex.vue'; e['default'] = D.exports }, acba: function (t, e, a) {}, adc7: function (t, e, a) { 'use strict'; var r = a('acba'), n = a.n(r); n.a } }])
