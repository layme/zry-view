(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cb2469c6"],{"0186":function(e,t,o){},"08cd":function(e,t,o){},"0a7f":function(e,t,o){},"0ba3":function(e,t,o){},"100b":function(e,t,o){},1163:function(e,t,o){},2022:function(e,t,o){"use strict";var a=o("884f"),i=o.n(a);i.a},2934:function(e,t,o){"use strict";o.d(t,"b",function(){return i}),o.d(t,"a",function(){return r}),o.d(t,"d",function(){return s}),o.d(t,"c",function(){return n});var a=o("6b6c"),i=function(){return a["a"].request({url:"/project/getCity.action",method:"get"})},r=function(e){return a["a"].request({url:"/project/getAreaByCity.action",method:"get",params:{cityCode:e}})},s=function(e){return a["a"].request({url:"/system/requestExportFile.action",method:"post",data:e})},n=function(e){return a["a"].request({url:"/system/getExportProcess",method:"get",params:{key:e}})}},"2f21":function(e,t,o){"use strict";var a=o("79e5");e.exports=function(e,t){return!!e&&a(function(){t?e.call(null,function(){},1):e.call(null)})}},"3c27":function(e,t,o){"use strict";var a=o("1163"),i=o.n(a);i.a},"55dd":function(e,t,o){"use strict";var a=o("5ca1"),i=o("d8e8"),r=o("4bf8"),s=o("79e5"),n=[].sort,l=[1,2,3];a(a.P+a.F*(s(function(){l.sort(void 0)})||!s(function(){l.sort(null)})||!o("2f21")(n)),"Array",{sort:function(e){return void 0===e?n.call(r(this)):n.call(r(this),i(e))}})},7457:function(e,t,o){"use strict";var a=o("8ed4"),i=o.n(a);i.a},"7ebe":function(e,t,o){},8637:function(e,t,o){"use strict";var a=o("a616"),i=o.n(a);i.a},"884f":function(e,t,o){},"8e7b":function(e,t,o){"use strict";var a=o("f5c3"),i=o.n(a);i.a},"8ed4":function(e,t,o){},"8f1c6":function(e,t,o){"use strict";var a=o("e19c"),i=o.n(a);i.a},"93f7":function(e,t,o){"use strict";var a=o("100b"),i=o.n(a);i.a},a616:function(e,t,o){},adad:function(e,t,o){"use strict";var a=o("08cd"),i=o.n(a);i.a},ae0b:function(e,t,o){},b4f8:function(e,t,o){"use strict";var a=o("ae0b"),i=o.n(a);i.a},bb53:function(e,t,o){"use strict";o.d(t,"b",function(){return i}),o.d(t,"a",function(){return r}),o.d(t,"d",function(){return s}),o.d(t,"e",function(){return n}),o.d(t,"c",function(){return l});var a=o("6b6c"),i=function(e){return a["a"].request({url:"/owner/ownerPageList.action",method:"post",data:e})},r=function(){return a["a"].request({url:"/owner/ownerList",method:"get"})},s=function(e){return a["a"].request({url:"/owner/saveOwner.action",method:"post",data:e})},n=function(e){return a["a"].request({url:"/owner/updateOwner.action",method:"post",data:e})},l=function(e){return a["a"].request({url:"/owner/updateOwner.action",method:"post",data:e})}},ca54:function(e,t,o){"use strict";var a=o("e754"),i=o.n(a);i.a},dae2:function(e,t,o){"use strict";var a=o("0186"),i=o.n(a);i.a},e19c:function(e,t,o){},e754:function(e,t,o){},ed4d:function(e,t,o){"use strict";var a=o("7ebe"),i=o.n(a);i.a},f580:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h2",{staticStyle:{"margin-bottom":"20px"}},[e._v("当前项目: "+e._s(e.name?e.name:"-"))]),o("Tabs",{attrs:{type:"card"},model:{value:e.$store.state.project.activeName,callback:function(t){e.$set(e.$store.state.project,"activeName",t)},expression:"$store.state.project.activeName"}},[o("TabPane",{attrs:{label:"基础信息",name:"1"}},["1"===e.$store.state.project.activeName?o("base-info",{attrs:{"project-bid":e.projectBid},on:{success:e.handleSuccess}}):e._e()],1),o("TabPane",{attrs:{label:"楼栋管理",name:"2",disabled:e.isDisabled(2),lazy:""}},["2"===e.$store.state.project.activeName?o("building",{attrs:{"project-bid":e.projectBid}}):e._e()],1),o("TabPane",{attrs:{label:"房型分类",name:"3",disabled:e.isDisabled(3),lazy:""}},["3"===e.$store.state.project.activeName?o("house-sort",{attrs:{"project-bid":e.projectBid}}):e._e()],1),o("TabPane",{attrs:{label:"房型管理",name:"4",disabled:e.isDisabled(4),lazy:""}},["4"===e.$store.state.project.activeName?o("house-type",{attrs:{"project-bid":e.projectBid}}):e._e()],1),o("TabPane",{attrs:{label:"房间管理",name:"5",disabled:e.isDisabled(5),lazy:""}},["5"===e.$store.state.project.activeName?o("room",{attrs:{"project-bid":e.projectBid}}):e._e()],1),o("TabPane",{attrs:{label:"项目资料",name:"6",disabled:e.isDisabled(2),lazy:""}},["6"===e.$store.state.project.activeName?o("project-data",{attrs:{"project-bid":e.projectBid}}):e._e()],1),o("TabPane",{attrs:{label:"区域管理",name:"7",disabled:e.isDisabled(3),lazy:""}},["7"===e.$store.state.project.activeName?o("public-area",{attrs:{"project-bid":e.projectBid}}):e._e()],1)],1)],1)},i=[],r=(o("6b54"),o("7f7f"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Form",{ref:"baseForm",staticClass:"full-top",attrs:{model:e.baseDto,rules:e.baseRules,"label-width":120}},[e.loading?o("Spin",{staticClass:"full-spin",attrs:{size:"large",fix:""}}):e._e(),o("Row",[o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"项目名称",prop:"projectName"}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:e.baseDto.projectName,callback:function(t){e.$set(e.baseDto,"projectName","string"===typeof t?t.trim():t)},expression:"baseDto.projectName"}})],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"城市",prop:"cityCode"}},[o("Select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.baseDto.cityCode,callback:function(t){e.$set(e.baseDto,"cityCode",t)},expression:"baseDto.cityCode"}},e._l(e.cityOptions,function(e){return o("Option",{key:e.cityCode,attrs:{label:e.cityName,value:e.cityCode}})}))],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"区县",prop:"areaCode"}},[o("Select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.baseDto.areaCode,callback:function(t){e.$set(e.baseDto,"areaCode",t)},expression:"baseDto.areaCode"}},e._l(e.areaOptions,function(e){return o("Option",{key:e.areaCode,attrs:{label:e.areaName,value:e.areaCode}})}))],1)],1)],1),o("Row",[o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"项目地址",prop:"projectAddress"}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:e.baseDto.projectAddress,callback:function(t){e.$set(e.baseDto,"projectAddress","string"===typeof t?t.trim():t)},expression:"baseDto.projectAddress"}})],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"百度经度",prop:"lng"}},[o("Input",{attrs:{type:"text",disabled:!0,placeholder:""},model:{value:e.baseDto.lng,callback:function(t){e.$set(e.baseDto,"lng",t)},expression:"baseDto.lng"}})],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"百度纬度",prop:"lat"}},[o("Input",{staticClass:"map-input",attrs:{type:"text",disabled:!0,placeholder:""},model:{value:e.baseDto.lat,callback:function(t){e.$set(e.baseDto,"lat",t)},expression:"baseDto.lat"}}),o("a",{staticStyle:{"margin-left":"12px"},on:{click:function(t){e.mapVisible=!0}}},[e._v("打开地图")])],1)],1)],1),o("Row",[o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"商圈",prop:"tradeArea"}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:e.baseDto.tradeArea,callback:function(t){e.$set(e.baseDto,"tradeArea","string"===typeof t?t.trim():t)},expression:"baseDto.tradeArea"}})],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"地铁信息",prop:"subwayLine"}},[o("Input",{attrs:{type:"text",placeholder:"距离**线**站**米",clearable:""},model:{value:e.baseDto.subwayLine,callback:function(t){e.$set(e.baseDto,"subwayLine","string"===typeof t?t.trim():t)},expression:"baseDto.subwayLine"}})],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"建筑面积",prop:"projectArea"}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:e.baseDto.projectArea,callback:function(t){e.$set(e.baseDto,"projectArea","string"===typeof t?t.trim():t)},expression:"baseDto.projectArea"}},[o("template",{slot:"append"},[e._v("㎡")])],2)],1)],1)],1),o("Row",[o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"楼栋数",prop:"buildingCount"}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:e.baseDto.buildingCount,callback:function(t){e.$set(e.baseDto,"buildingCount",e._n("string"===typeof t?t.trim():t))},expression:"baseDto.buildingCount"}})],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"合作类型",prop:"projectType"}},[o("Select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.baseDto.projectType,callback:function(t){e.$set(e.baseDto,"projectType",t)},expression:"baseDto.projectType"}},e._l(e.projectTypeOptions,function(e){return o("Option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"项目阶段",prop:"period"}},[o("Select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.baseDto.period,callback:function(t){e.$set(e.baseDto,"period",t)},expression:"baseDto.period"}},e._l(e.periodOptions,function(e){return o("Option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),o("Row",[o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"签约日期",prop:"signDate"}},[o("DatePicker",{staticClass:"my-date-picker",attrs:{type:"date",placeholder:"请选择","value-format":"timestamp",editable:!1,clearable:""},on:{"on-change":e.budgetEndLine},model:{value:e.baseDto.signDate,callback:function(t){e.$set(e.baseDto,"signDate",t)},expression:"baseDto.signDate"}})],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"到期日期",prop:"endlineDate"}},[o("DatePicker",{staticClass:"my-date-picker",attrs:{type:"date",placeholder:"请选择","value-format":"timestamp",editable:!1,clearable:""},model:{value:e.baseDto.endlineDate,callback:function(t){e.$set(e.baseDto,"endlineDate",t)},expression:"baseDto.endlineDate"}})],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"开业日期",prop:"openDate"}},[o("DatePicker",{staticClass:"my-date-picker",attrs:{type:"date",placeholder:"请选择","value-format":"timestamp",editable:!1,clearable:""},model:{value:e.baseDto.openDate,callback:function(t){e.$set(e.baseDto,"openDate",t)},expression:"baseDto.openDate"}})],1)],1)],1),o("Row",[o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"项目经理",prop:"projectManager"}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:e.baseDto.projectManager,callback:function(t){e.$set(e.baseDto,"projectManager","string"===typeof t?t.trim():t)},expression:"baseDto.projectManager"}})],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"经理手机",prop:"projectManagerMobile"}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:e.baseDto.projectManagerMobile,callback:function(t){e.$set(e.baseDto,"projectManagerMobile","string"===typeof t?t.trim():t)},expression:"baseDto.projectManagerMobile"}})],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"项目电话",prop:"sellPhone"}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:e.baseDto.sellPhone,callback:function(t){e.$set(e.baseDto,"sellPhone","string"===typeof t?t.trim():t)},expression:"baseDto.sellPhone"}})],1)],1)],1),o("Row",[o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"业主名称",prop:"ownerBid"}},[o("Select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.baseDto.ownerBid,callback:function(t){e.$set(e.baseDto,"ownerBid",t)},expression:"baseDto.ownerBid"}},e._l(e.ownerOptions,function(e){return o("Option",{key:e.bid,attrs:{label:e.ownerName,value:e.bid}})}))],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"收款公司",prop:"settlementCompany"}},[o("Select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.baseDto.settlementCompany,callback:function(t){e.$set(e.baseDto,"settlementCompany",t)},expression:"baseDto.settlementCompany"}},e._l(e.CompanyOptions,function(e){return o("Option",{key:e.key,attrs:{label:e.text,value:e.key}})}))],1)],1)],1),o("Row",[o("Col",{attrs:{span:16}},[o("FormItem",{attrs:{label:"项目简介",prop:"projectDesc"}},[o("Input",{attrs:{type:"textarea",rows:5,maxlength:500,placeholder:""},model:{value:e.baseDto.projectDesc,callback:function(t){e.$set(e.baseDto,"projectDesc","string"===typeof t?t.trim():t)},expression:"baseDto.projectDesc"}})],1)],1)],1),o("Row",[o("Col",{attrs:{span:16}},[o("FormItem",{attrs:{label:"空检报告",prop:"projectReportUrl"}},[o("Input",{attrs:{type:"textarea",rows:3,maxlength:400,placeholder:""},model:{value:e.baseDto.projectReportUrl,callback:function(t){e.$set(e.baseDto,"projectReportUrl","string"===typeof t?t.trim():t)},expression:"baseDto.projectReportUrl"}})],1)],1)],1),o("Row",[o("Col",{attrs:{span:16}},[o("FormItem",[e.proBid?o("Button",{attrs:{type:"warning"},on:{click:function(t){e.validateForm("baseForm")}}},[e._v("修 改")]):o("Button",{attrs:{type:"primary"},on:{click:function(t){e.validateForm("baseForm")}}},[e._v("保 存")]),o("Button",{staticClass:"my-btn",on:{click:function(t){e.resetForm("baseForm")}}},[e._v("重 置")])],1)],1)],1),o("Modal",{attrs:{title:"选取经纬坐标",width:"900","footer-hide":""},model:{value:e.mapVisible,callback:function(t){e.mapVisible=t},expression:"mapVisible"}},[e.mapVisible?o("map-card",{staticClass:"map-cls",attrs:{"search-style":e.searchStyle,location:e.location},on:{click:e.handleMapClick}}):e._e()],1)],1)}),s=[],n=(o("ac6a"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"all"}},[o("Input",{style:e.searchStyle,attrs:{type:"text",placeholder:"请输入地点",prefix:"ios-pin",clearable:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),o("baidu-map",{staticClass:"bm-view",attrs:{center:e.center,zoom:e.zoom,"scroll-wheel-zoom":!0},on:{ready:e.handleReady,click:e.handleClick,moving:e.syncCenterAndZoom,moveend:e.syncCenterAndZoom,zoomend:e.syncCenterAndZoom}},[o("bm-geolocation",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",showAddressBar:!0,autoLocation:!0}}),o("bm-local-search",{attrs:{keyword:e.keyword,"auto-viewport":!0,panel:!1}})],1)],1)}),l=[],u={name:"MapCard",props:{location:Object,searchStyle:{type:Object,default:function(){}}},data:function(){return{keyword:"",center:{},zoom:15,BMap:"",map:""}},mounted:function(){},methods:{handleReady:function(e){var t=this,o=e.BMap,a=e.map;if(this.BMap=o,this.map=a,this.location.lng&&this.location.lat){this.center=this.location;var i=new o.Point(this.location.lng,this.location.lat),r=new o.Marker(i);a.addOverlay(r),a.panTo(i)}else{var s=new o.Geolocation;s.getCurrentPosition(function(e){t.center={lng:e.longitude,lat:e.latitude};var i=new o.Point(e.longitude,e.latitude),r=new o.Marker(i);a.addOverlay(r),a.panTo(i)},{enableHighAccuracy:!0})}},handleClick:function(e){e.type,e.target;var t=e.point;e.pixel,e.overlay;this.map.clearOverlays();var o=new BMap.Point(t.lng,t.lat),a=new BMap.Marker(o);this.map.addOverlay(a),this.$emit("click",t)},syncCenterAndZoom:function(e){var t=e.target.getCenter(),o=t.lng,a=t.lat;this.center.lng=o,this.center.lat=a,this.zoom=e.target.getZoom()}}},c=u,d=(o("8e7b"),o("2877")),p=Object(d["a"])(c,n,l,!1,null,"100aac2d",null);p.options.__file="MapCard.vue";var h=p.exports,m=o("2934"),b=o("bb53"),g=o("24d2"),f={name:"BaseInfo",props:{projectBid:String},components:{MapCard:h},data:function(){return{proBid:this.projectBid,cityOptions:[],areaOptions:[],ownerOptions:[],CompanyOptions:[],baseDto:{projectName:"",cityCode:"",areaCode:"",projectAddress:"",lng:"",lat:"",tradeArea:"",subwayLine:"",projectArea:"",buildingCount:"",projectType:"",period:"",signDate:"",endlineDate:"",openDate:"",projectManager:"",projectManagerMobile:"",sellPhone:"",ownerBid:"",settlementCompany:"",projectDesc:"",projectReportUrl:""},projectTypeOptions:[{label:"直营",value:1},{label:"托管",value:2}],periodOptions:[{label:"工程",value:1},{label:"爬坡",value:2},{label:"运营",value:3}],baseRules:{projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"},{max:15,message:"不能超过15个字符",trigger:"blur"}],cityCode:[{required:!0,message:"请选择城市",trigger:"change"}],areaCode:[{required:!0,message:"请选择区县",trigger:"change"}],projectAddress:[{required:!0,message:"请输入项目地址",trigger:"blur"},{max:50,message:"不能超过50个字符",trigger:"blur"}],lng:[{required:!0,type:"number",message:"请在地图中选择",trigger:"change"}],lat:[{required:!0,type:"number",message:"请在地图中选择",trigger:"change"}],tradeArea:[{required:!0,message:"请输入项目地址",trigger:"blur"},{max:20,message:"不能超过20个字符",trigger:"blur"}],subwayLine:[{required:!0,message:"请输入地铁信息",trigger:"blur"},{max:50,message:"不能超过50个字符",trigger:"blur"}],projectArea:[{required:!0,message:"请输入建筑面积",trigger:"blur"},{pattern:/^\d{1,4}(\.\d{0,2})?$/,message:"请输入1万以内的两位小数或整数",trigger:"blur"}],buildingCount:[{required:!0,type:"number",max:99,message:"请输入1百以内的整数",trigger:"blur"}],projectType:[{required:!0,type:"number",message:"请选择合作类型",trigger:"change"}],period:[{required:!0,type:"number",message:"请选择项目阶段",trigger:"change"}],signDate:[{required:!0,type:"date",message:"请选择签约日期",trigger:"change"}],endlineDate:[{required:!0,type:"date",message:"请选择到期日期",trigger:"change"}],openDate:[{required:!0,type:"date",message:"请选择开业日期",trigger:"change"}],projectManager:[{required:!0,message:"请输入项目经理",trigger:"blur"},{max:10,message:"不能超过10个字符",trigger:"blur"}],projectManagerMobile:[{required:!0,message:"请输入经理手机",trigger:"blur"},{pattern:/^1\d{10}$/,message:"手机号格式有误",trigger:"blur"}],sellPhone:[{required:!0,message:"请输入项目电话",trigger:"blur"},{max:50,message:"不能超过50个字符",trigger:"blur"}],projectDesc:[{required:!0,message:"请输入项目简介",trigger:"blur"},{max:500,message:"不能超过500个字符",trigger:"blur"}]},loading:!1,location:{},canClear:!1,mapVisible:!1,searchStyle:{position:"absolute",top:"80px",left:"30px",zIndex:3,width:"270px","-webkit-box-shadow":["#dcdee2","0","1px","6px"],"-moz-box-shadow":["#dcdee2","0","1px","6px"],"box-shadow":["#dcdee2","0","1px","6px"]}}},methods:{validateForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.saveOrUpBase()})},resetForm:function(e){this.$refs[e].resetFields()},getCity:function(){var e=this;Object(m["b"])().then(function(t){e.cityOptions=t.body})},getArea:function(e){var t=this;Object(m["a"])(e).then(function(e){t.areaOptions=e.body})},getOwner:function(){var e=this;Object(b["a"])().then(function(t){e.ownerOptions=t.body})},getCompany:function(){var e=this;Object(g["d"])().then(function(t){e.CompanyOptions=t.body})},getBaseInfo:function(){var e=this;this.projectBid&&(this.loading=!0,Object(g["b"])(this.projectBid).then(function(t){e.baseDto=t.body,e.baseDto.projectArea=e.baseDto.projectArea.toString(),e.baseDto.signDate=new Date(e.baseDto.signDate),e.baseDto.endlineDate=new Date(e.baseDto.endlineDate),e.baseDto.openDate=new Date(e.baseDto.openDate),e.location={lng:e.baseDto.lng,lat:e.baseDto.lat},e.loading=!1,e.canClear=!1}).catch(function(){e.loading=!1}))},getSimpleAddress:function(){var e=this,t=0,o=0;this.cityOptions.forEach(function(o){o.cityCode===e.baseDto.cityCode&&(t=o.cityName.length)}),this.areaOptions.forEach(function(t){t.areaCode===e.baseDto.areaCode&&(o=t.areaName.length)}),this.baseDto.projectAddress=this.baseDto.projectAddress.substring(t+o)},saveOrUpBase:function(){var e=this,t="",o="";this.cityOptions.forEach(function(o){o.cityCode===e.baseDto.cityCode&&(t=o.cityName)}),this.areaOptions.forEach(function(t){t.areaCode===e.baseDto.areaCode&&(o=t.areaName)});var a=this.baseDto.projectAddress;this.baseDto.projectAddress=t+o+a,this.projectBid?this.updateBase(JSON.parse(JSON.stringify(this.baseDto))):this.saveBase(JSON.parse(JSON.stringify(this.baseDto))),this.baseDto.projectAddress=a},saveBase:function(e){var t=this;this.loading=!0,Object(g["k"])(e).then(function(o){t.$Message.success("保存成功"),t.proBid=o.body,t.$store.commit("upStep",2),t.$emit("success",t.proBid,e.projectName),t.loading=!1}).catch(function(){t.loading=!1})},updateBase:function(e){var t=this;this.loading=!0,Object(g["n"])(e).then(function(o){t.$Message.success("修改成功"),t.proBid=o.body,t.$store.commit("upStep",2),t.$emit("success",t.proBid,e.projectName),t.loading=!1}).catch(function(){t.loading=!1})},handleMapClick:function(e){this.baseDto.lng=e.lng,this.baseDto.lat=e.lat},budgetEndLine:function(e){var t=new Date(e);t.setFullYear(t.getFullYear()+10),t.setDate(t.getDate()-1),this.baseDto.endlineDate=t}},watch:{projectBid:function(){this.getBaseInfo()},"baseDto.cityCode":function(e,t){this.canClear&&(this.baseDto.areaCode=""),this.canClear=!0,e?this.getArea(e):this.areaOptions=[]}},created:function(){this.getCity(),this.getOwner(),this.getBaseInfo(),this.getCompany()}},y=f,v=(o("ff0d"),Object(d["a"])(y,r,s,!1,null,"4bdb2322",null));v.options.__file="baseInfo.vue";var D=v.exports,T=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"full-top"},[e.loading?o("Spin",{staticClass:"full-spin",attrs:{size:"large",fix:""}}):e._e(),o("Button",{attrs:{type:"primary"},on:{click:e.addBuilding}},[e._v("添加楼栋")]),e._l(e.buildings,function(t,a){return o("building-card",{key:a,staticClass:"build-row",attrs:{projectBid:e.projectBid,building:t,index:a},on:{remove:e.confirmRemove}})})],2)},C=[],B=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Card",{attrs:{"dis-hover":""}},[o("Form",{ref:"buildingForm",staticClass:"my-top full-top",attrs:{model:e.buildingDto,rules:e.buildingRules,"label-width":80}},[e.loading?o("Spin",{staticClass:"full-spin",attrs:{size:"large",fix:""}}):e._e(),o("Row",{attrs:{gutter:10}},[o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"楼栋名称",prop:"buildingName"}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:e.buildingDto.buildingName,callback:function(t){e.$set(e.buildingDto,"buildingName","string"===typeof t?t.trim():t)},expression:"buildingDto.buildingName"}})],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"建成年代",prop:"buildingFinishYear"}},[o("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"year",editable:!1,"value-format":"yyyy",options:e.pickerOptions,clearable:""},model:{value:e.buildingDto.buildingFinishYear,callback:function(t){e.$set(e.buildingDto,"buildingFinishYear",t)},expression:"buildingDto.buildingFinishYear"}})],1)],1),o("Col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[o("Button",{attrs:{type:"error",shape:"circle",icon:"md-trash"},on:{click:e.remove}})],1)],1),o("Row",{attrs:{gutter:10}},[o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"建筑面积",prop:"buildingArea"}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:e.buildingDto.buildingArea,callback:function(t){e.$set(e.buildingDto,"buildingArea","string"===typeof t?t.trim():t)},expression:"buildingDto.buildingArea"}},[o("template",{slot:"append"},[e._v("㎡")])],2)],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"外墙面积",prop:"buildingOutsidearea"}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:e.buildingDto.buildingOutsidearea,callback:function(t){e.$set(e.buildingDto,"buildingOutsidearea","string"===typeof t?t.trim():t)},expression:"buildingDto.buildingOutsidearea"}},[o("template",{slot:"append"},[e._v("㎡")])],2)],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"电梯数",prop:"buildingElevatornumber"}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:e.buildingDto.buildingElevatornumber,callback:function(t){e.$set(e.buildingDto,"buildingElevatornumber","string"===typeof t?t.trim():t)},expression:"buildingDto.buildingElevatornumber"}})],1)],1)],1),o("Row",{attrs:{gutter:10}},[o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"楼梯数",prop:"buildingStairnumber"}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:e.buildingDto.buildingStairnumber,callback:function(t){e.$set(e.buildingDto,"buildingStairnumber","string"===typeof t?t.trim():t)},expression:"buildingDto.buildingStairnumber"}})],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"楼层数",prop:"buildingFloornumber"}},[o("Input",{attrs:{type:"text",placeholder:"",maxlength:3,clearable:""},model:{value:e.buildingDto.buildingFloornumber,callback:function(t){e.$set(e.buildingDto,"buildingFloornumber",t)},expression:"buildingDto.buildingFloornumber"}})],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"最低楼层",prop:"lowestFloor"}},[o("Input",{attrs:{type:"text",placeholder:"",maxlength:3,clearable:""},model:{value:e.buildingDto.lowestFloor,callback:function(t){e.$set(e.buildingDto,"lowestFloor",t)},expression:"buildingDto.lowestFloor"}})],1)],1)],1),o("Row",{attrs:{gutter:10}},[o("Col",{attrs:{span:24}},[o("FormItem",{attrs:{label:"出租楼层",prop:"rentableFloor"}},[o("CheckboxGroup",{model:{value:e.buildingDto.rentableFloor,callback:function(t){e.$set(e.buildingDto,"rentableFloor",t)},expression:"buildingDto.rentableFloor"}},e._l(e.floorOptions,function(t,a){return o("Checkbox",{key:a,attrs:{label:t}},[e._v(e._s(t+"层"))])}))],1)],1)],1),o("FormItem",[e.buildingDto.fid?o("Button",{attrs:{type:"warning"},on:{click:function(t){e.validateForm("buildingForm")}}},[e._v("修 改")]):o("Button",{attrs:{type:"primary"},on:{click:function(t){e.validateForm("buildingForm")}}},[e._v("保 存")]),o("Button",{staticClass:"my-btn",on:{click:function(t){e.resetForm("buildingForm")}}},[e._v("重 置")])],1)],1)],1)},F=[],w=(o("28a5"),o("456d"),o("55dd"),o("c5f6"),o("6b6c")),k=function(e){return w["a"].request({url:"/building/getBuildingList",method:"get",params:{projectFid:e}})},j=function(e){return w["a"].request({url:"/building/saveBuilding",method:"post",data:e})},x=function(e){return w["a"].request({url:"/building/updateBuilding",method:"post",data:e})},O=function(e){return w["a"].request({url:"/building/deleteBuilding",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{buildingFid:e}})},S=o("90de"),$={name:"buildingCard",props:{projectBid:String,building:Object,index:Number},data:function(){return{buildingDto:{projectFid:this.projectBid,buildingName:"",buildingFinishYear:"",buildingArea:"",buildingOutsidearea:"",buildingElevatornumber:"",buildingStairnumber:"",buildingFloornumber:"",lowestFloor:"",buildingRentablefloor:"",rentableFloor:[]},buildingRules:{buildingName:[{required:!0,message:"请输入楼栋名称",trigger:"blur"},{max:15,message:"不能超过15个字符",trigger:"blur"}],buildingFinishYear:[{required:!0,type:"date",message:"请选择建成年代",trigger:"change"}],buildingArea:[{required:!0,message:"请输入建筑面积",trigger:"blur"},{pattern:/^\d{1,5}(\.\d{0,2})?$/,message:"请输入10万以内的两位小数或整数",trigger:"blur"}],buildingOutsidearea:[{required:!0,message:"请输入外墙面积",trigger:"blur"},{pattern:/^\d{1,5}(\.\d{0,2})?$/,message:"请输入10万以内的两位小数或整数",trigger:"blur"}],buildingElevatornumber:[{required:!0,message:"请输入电梯数",trigger:"blur"},{pattern:/^\d{1,2}?$/,message:"请输入1百以内的整数",trigger:"blur"}],buildingStairnumber:[{required:!0,message:"请输入楼梯数",trigger:"blur"},{pattern:/^\d{1,2}?$/,message:"请输入1百以内的整数",trigger:"blur"}],buildingFloornumber:[{required:!0,message:"请输入楼层数",trigger:"blur"},{pattern:/^([1-9][0-9]?|100)$/,message:"请输入1～100的整数",trigger:"blur"}],lowestFloor:[{required:!0,message:"请输入最低楼层",trigger:"blur"},{pattern:/^((-(20|1\d|[1-9]))|1[0-4]\d|100|[1-9]\d|\d)$/,message:"请输入-20～100的整数",trigger:"blur"}],rentableFloor:[{type:"array",required:!0,message:"请选择出租楼层",trigger:"change"}]},loading:!1,pickerOptions:{disabledDate:function(e){return e.getFullYear()>(new Date).getFullYear()}}}},methods:{validateForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.saveOrUpBuilding()})},resetForm:function(e){this.$refs[e].resetFields()},remove:function(){this.$emit("remove",this.index)},saveOrUpBuilding:function(){this.buildingDto.fid?this.updateBuilding():this.saveBuilding()},saveBuilding:function(){var e=this;this.loading=!0,this.buildingDto.rentableFloor.sort(function(e,t){return e-t}),this.buildingDto.buildingRentablefloor=this.buildingDto.rentableFloor.join(","),this.buildingDto.buildingFinishYear=Object(S["f"])(this.buildingDto.buildingFinishYear,"year"),j(this.buildingDto).then(function(t){e.buildingDto.fid=t.body,e.$Message.success("保存成功"),e.$store.commit("upStep",3),e.loading=!1}).catch(function(){e.loading=!1})},updateBuilding:function(){var e=this;this.loading=!0,this.buildingDto.rentableFloor.sort(function(e,t){return e-t}),this.buildingDto.buildingRentablefloor=this.buildingDto.rentableFloor.join(","),this.buildingDto.buildingFinishYear=Object(S["f"])(this.buildingDto.buildingFinishYear,"year"),x(this.buildingDto).then(function(t){e.$Message.success("修改成功"),e.loading=!1}).catch(function(){e.loading=!1})},syncData:function(){Object.keys(this.building).length&&(this.buildingDto.projectFid=this.projectBid,this.buildingDto.fid=this.building.fid,this.buildingDto.buildingName=this.building.buildingName,this.buildingDto.buildingFinishYear=this.building.buildingFinishYear.toString(),this.buildingDto.buildingArea=this.building.buildingArea.toString(),this.buildingDto.buildingOutsidearea=this.building.buildingOutsidearea.toString(),this.buildingDto.buildingElevatornumber=this.building.buildingElevatornumber.toString(),this.buildingDto.buildingStairnumber=this.building.buildingStairnumber.toString(),this.buildingDto.buildingFloornumber=this.building.buildingFloornumber.toString(),this.buildingDto.lowestFloor=this.building.lowestFloor.toString(),this.buildingDto.buildingRentablefloor=this.building.buildingRentablefloor,this.buildingDto.rentableFloor=this.building.buildingRentablefloor?this.building.buildingRentablefloor.split(","):[])}},computed:{floorOptions:function(){for(var e=parseInt(this.buildingDto.buildingFloornumber),t=parseInt(this.buildingDto.lowestFloor),o=[],a=t;a<=e;a++)0!==a&&o.push(a.toString());return o}},watch:{building:function(e,t){this.syncData()}},mounted:function(){this.syncData()}},_=$,P=(o("3c27"),Object(d["a"])(_,B,F,!1,null,"4b42025e",null));P.options.__file="buildingCard.vue";var I=P.exports,N={name:"building",props:{projectBid:String},components:{buildingCard:I},data:function(){return{buildings:[],loading:!1}},methods:{getBuildings:function(){var e=this;this.projectBid?(this.loading=!0,k(this.projectBid).then(function(t){t.body.length>0?e.buildings=t.body:e.buildings.push({}),e.loading=!1}).catch(function(){e.buildings.push({}),e.loading=!1})):this.buildings=[{}]},addBuilding:function(){this.buildings.push({})},confirmRemove:function(e){var t=this;this.$Modal.confirm({title:"通知",content:"<p>确定删除该楼栋吗？</p>",onOk:function(){t.removeBuilding(e)},onCancel:function(){}})},removeBuilding:function(e){var t=this;this.buildings[e].fid?(this.loading=!0,O(this.buildings[e].fid).then(function(o){t.$Message.success("删除成功"),t.buildings.splice(e,1),t.loading=!1}).catch(function(){t.loading=!1})):this.buildings.splice(e,1)}},watch:{projectBid:function(){this.getBuildings()}},created:function(){this.getBuildings()}},A=N,R=(o("adad"),Object(d["a"])(A,T,C,!1,null,"4f2da12d",null));R.options.__file="building.vue";var L=R.exports,q=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"full-top"},[e.loading?o("Spin",{staticClass:"full-spin",attrs:{size:"large",fix:""}}):e._e(),o("Button",{attrs:{type:"primary"},on:{click:e.addHouseSort}},[e._v("添加房型分类")]),o("Row",[o("Col",{attrs:{span:18}},e._l(e.houseSorts,function(t,a){return o("house-sort-card",{key:a,staticClass:"house-sort",attrs:{projectBid:e.projectBid,houseSort:t,index:a},on:{remove:e.confirmRemove,show:e.confirmShow}})}))],1)],1)},M=[],H=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Card",{attrs:{"dis-hover":""}},[o("Form",{ref:"houseSortForm",staticClass:"my-top full-top",attrs:{model:e.houseSortDto,rules:e.houseSortRules,"label-width":100}},[e.loading?o("Spin",{staticClass:"full-spin",attrs:{size:"large",fix:""}}):e._e(),o("Row",{attrs:{gutter:10}},[o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"房型分类名称",prop:"houseName"}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:e.houseSortDto.houseName,callback:function(t){e.$set(e.houseSortDto,"houseName","string"===typeof t?t.trim():t)},expression:"houseSortDto.houseName"}})],1)],1),e.houseSortDto.bid?[o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"当前状态"}},[e.houseSortDto.isShow?o("Tag",{attrs:{color:"success"}},[e._v("在App端展示")]):o("Tag",{attrs:{color:"default"}},[e._v("在App端隐藏")])],1)],1),o("Col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[e.houseSortDto.isShow?o("Tooltip",{staticClass:"my-tip",attrs:{effect:"dark",content:"在App上隐藏",placement:"top"}},[o("Button",{attrs:{type:"primary",shape:"circle",icon:"ios-appstore-outline"},on:{click:function(t){e.show(0)}}})],1):o("Tooltip",{staticClass:"my-tip",attrs:{effect:"dark",content:"在App上展示",placement:"top"}},[o("Button",{attrs:{type:"primary",shape:"circle",icon:"ios-appstore"},on:{click:function(t){e.show(1)}}})],1),o("Button",{attrs:{type:"error",shape:"circle",icon:"md-trash"},on:{click:e.remove}})],1)]:[o("Col",{staticStyle:{"text-align":"right"},attrs:{span:16}},[o("Button",{attrs:{type:"error",shape:"circle",icon:"md-trash"},on:{click:e.remove}})],1)]],2),o("Row",{attrs:{gutter:10}},[o("Col",{attrs:{span:16}},[o("FormItem",{attrs:{label:"介绍",prop:"houseTypeDesc"}},[o("Input",{attrs:{type:"textarea",rows:5,placeholder:"",maxlength:200},model:{value:e.houseSortDto.houseTypeDesc,callback:function(t){e.$set(e.houseSortDto,"houseTypeDesc","string"===typeof t?t.trim():t)},expression:"houseSortDto.houseTypeDesc"}})],1)],1)],1),o("FormItem",{staticStyle:{"margin-top":"20px"}},[e.houseSortDto.bid?o("Button",{attrs:{type:"warning"},on:{click:function(t){e.validateForm("houseSortForm")}}},[e._v("修 改")]):o("Button",{attrs:{type:"primary"},on:{click:function(t){e.validateForm("houseSortForm")}}},[e._v("保 存")]),o("Button",{staticClass:"my-btn",on:{click:function(t){e.resetForm("houseSortForm")}}},[e._v("重 置")])],1)],1)],1)],1)},E=[],V=function(e){return w["a"].request({url:"/houseTypeParent/getHouseTypeParentList",method:"get",params:{projectBid:e}})},U=function(e){return w["a"].request({url:"/houseTypeParent/addHouseTypeParent",method:"post",data:e})},z=function(e){return w["a"].request({url:"/houseTypeParent/updateHouseTypeParent.action",method:"post",data:e})},Q=function(e){return w["a"].request({url:"/houseTypeParent/deleteHouseTypeParent",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{houseTypeParentBid:e}})},Y=function(e,t){return w["a"].request({url:"/houseTypeParent/isShow.action",method:"post",params:{bid:e,isShow:t}})},J={name:"houseSortCard",props:{projectBid:String,houseSort:Object,index:Number},data:function(){return{houseSortDto:{projectBid:this.projectBid,houseName:"",houseTypeDesc:"",isShow:""},houseSortRules:{houseName:[{required:!0,message:"请输入房型分类名称",trigger:"blur"},{max:15,message:"不能超过15个字符",trigger:"blur"}],houseTypeDesc:[{required:!0,message:"请输入介绍",trigger:"blur"},{max:200,message:"不能超过200个字符",trigger:"blur"}]},loading:!1}},methods:{validateForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.saveOrUpHouseSort()})},resetForm:function(e){this.$refs[e].resetFields()},remove:function(){this.$emit("remove",this.index)},saveOrUpHouseSort:function(){this.houseSortDto.bid?this.updateHouseSort():this.saveHouseSort()},saveHouseSort:function(){var e=this;this.loading=!0,U(this.houseSortDto).then(function(t){e.$Message.success("保存成功"),e.houseSortDto.bid=t.body,e.$store.commit("upStep",4),e.loading=!1}).catch(function(){e.loading=!1})},updateHouseSort:function(){var e=this;this.loading=!0,z(this.houseSortDto).then(function(){e.$Message.success("修改成功"),e.loading=!1}).catch(function(){e.loading=!1})},show:function(e){this.$emit("show",this.houseSortDto.bid,e)},syncData:function(){Object.keys(this.houseSort).length&&(this.houseSortDto.projectBid=this.projectBid,this.houseSortDto.bid=this.houseSort.bid,this.houseSortDto.houseName=this.houseSort.houseName,this.houseSortDto.houseTypeDesc=this.houseSort.houseTypeDesc,this.houseSortDto.isShow=this.houseSort.isShow)}},watch:{houseSort:function(e){this.syncData()}},mounted:function(){this.syncData()}},G=J,Z=(o("ff82"),Object(d["a"])(G,H,E,!1,null,"2351e3e1",null));Z.options.__file="houseSortCard.vue";var K=Z.exports,W={name:"houseSort",props:{projectBid:String},components:{houseSortCard:K},data:function(){return{houseSorts:[],loading:!1}},methods:{getHouseSorts:function(){var e=this;this.projectBid?(this.loading=!0,V(this.projectBid).then(function(t){t.body.length>0?e.houseSorts=t.body:e.houseSorts.push({}),e.loading=!1}).catch(function(){e.houseSorts.push({}),e.loading=!1})):this.houseSorts=[{}]},addHouseSort:function(){this.houseSorts.push({})},confirmRemove:function(e){var t=this;this.$Modal.confirm({title:"通知",content:"<p>确定删除该房型分类吗？</p>",onOk:function(){t.removeHouseSort(e)},onCancel:function(){}})},removeHouseSort:function(e){var t=this;this.houseSorts[e].bid?(this.loading=!0,Q(this.houseSorts[e].bid).then(function(o){t.$Message.success("删除成功"),t.houseSorts.splice(e,1),t.loading=!1}).catch(function(){t.loading=!1})):this.houseSorts.splice(e,1)},confirmShow:function(e,t){var o=this,a=1===t?"展示":"隐藏";this.$Modal.confirm({title:"通知",content:"<p>确定在App上".concat(a,"该房型分类吗?</p>"),onOk:function(){o.showHouseSort(e,t)},onCancel:function(){}})},showHouseSort:function(e,t){var o=this;this.loading=!0,Y(e,t).then(function(e){o.$Message.success("操作成功"),o.getHouseSorts(),o.loading=!1}).catch(function(){o.loading=!1})}},watch:{projectBid:function(){this.getHouseSorts()}},created:function(){this.getHouseSorts()}},X=W,ee=(o("ca54"),Object(d["a"])(X,q,M,!1,null,"98a2fd76",null));ee.options.__file="houseSort.vue";var te=ee.exports,oe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"full-top"},[e.loading?o("Spin",{staticClass:"full-spin",attrs:{size:"large",fix:""}}):e._e(),o("Button",{attrs:{type:"primary"},on:{click:e.addHouseType}},[e._v("添加房型")]),e._l(e.houseTypes,function(t,a){return o("house-type-card",{key:a,staticClass:"house-type",attrs:{projectBid:e.projectBid,houseType:t,index:a,houseTypeParentBidOptions:e.houseTypeParentBidOptions,bedTypeList:e.bedTypeList},on:{show:e.confirmShow,remove:e.confirmRemove}})})],2)},ae=[],ie=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("card",{attrs:{"dis-hover":""}},[o("Form",{ref:"houseTypeForm",attrs:{model:e.houseTypeDto,rules:e.houseTypeRules,"label-width":90}},[o("Row",{attrs:{gutter:10}},[o("Col",{attrs:{span:12}},[o("FormItem",{attrs:{label:"房型分类",prop:"houseTypeParentBid"}},[o("Select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.houseTypeDto.houseTypeParentBid,callback:function(t){e.$set(e.houseTypeDto,"houseTypeParentBid",t)},expression:"houseTypeDto.houseTypeParentBid"}},e._l(e.houseTypeParentBidOptions,function(e){return o("Option",{key:e.bid,attrs:{label:e.houseName,value:e.bid}})}))],1)],1),e.houseTypeDto.bid?[o("Col",{attrs:{span:6}},[o("FormItem",{attrs:{label:"当前状态"}},[e.houseTypeDto.isShow?o("Tag",{attrs:{color:"success"}},[e._v("在App端展示")]):o("Tag",{attrs:{color:"default"}},[e._v("在App端隐藏")])],1)],1),o("Col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[e.houseTypeDto.isShow?o("Tooltip",{staticClass:"my-tip",attrs:{effect:"dark",content:"在App上隐藏",placement:"top"}},[o("Button",{attrs:{type:"primary",shape:"circle",icon:"ios-appstore-outline"},on:{click:function(t){e.show(0)}}})],1):o("Tooltip",{staticClass:"my-tip",attrs:{effect:"dark",content:"在App上展示",placement:"top"}},[o("Button",{attrs:{type:"primary",shape:"circle",icon:"ios-appstore"},on:{click:function(t){e.show(1)}}})],1),o("Button",{attrs:{type:"error",shape:"circle",icon:"md-trash"},on:{click:e.remove}})],1)]:[o("Col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[o("Button",{attrs:{type:"error",shape:"circle",icon:"md-trash"},on:{click:e.remove}})],1)]],2),o("Row",{attrs:{gutter:10}},[o("Col",{attrs:{span:24}},[o("Row",{attrs:{gutter:10}},[o("Col",{attrs:{span:12}},[o("FormItem",{attrs:{label:"房型名称",prop:"houseName"}},[o("Input",{attrs:{type:"text",clearable:""},model:{value:e.houseTypeDto.houseName,callback:function(t){e.$set(e.houseTypeDto,"houseName","string"===typeof t?t.trim():t)},expression:"houseTypeDto.houseName"}})],1)],1),o("Col",{attrs:{span:12}},[o("FormItem",{attrs:{label:"面积",prop:"houseArea"}},[o("Input",{attrs:{type:"text",clearable:""},model:{value:e.houseTypeDto.houseArea,callback:function(t){e.$set(e.houseTypeDto,"houseArea","string"===typeof t?t.trim():t)},expression:"houseTypeDto.houseArea"}},[o("template",{slot:"append"},[e._v("㎡")])],2)],1)],1)],1),o("Row",{attrs:{gutter:10}},[o("Col",{attrs:{span:12}},[o("FormItem",{attrs:{label:"卫生间类型",prop:"isBathroom"}},[o("Select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.houseTypeDto.isBathroom,callback:function(t){e.$set(e.houseTypeDto,"isBathroom",t)},expression:"houseTypeDto.isBathroom"}},e._l(e.bathroomOptions,function(e){return o("Option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),o("Col",{attrs:{span:12}},[o("FormItem",{attrs:{label:"洗浴间类型",prop:"isBath"}},[o("Select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.houseTypeDto.isBath,callback:function(t){e.$set(e.houseTypeDto,"isBath",t)},expression:"houseTypeDto.isBath"}},e._l(e.bathOptions,function(e){return o("Option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),o("Row",{attrs:{gutter:10}},[o("Col",{attrs:{span:24}},[o("FormItem",{attrs:{label:"房型描述",prop:"introduction"}},[o("Input",{attrs:{type:"textarea",rows:5,maxlength:200},model:{value:e.houseTypeDto.introduction,callback:function(t){e.$set(e.houseTypeDto,"introduction","string"===typeof t?t.trim():t)},expression:"houseTypeDto.introduction"}})],1)],1)],1),e._l(e.houseTypeDto.bedList,function(t,a){return o("Row",{key:"bed"+a,attrs:{gutter:10}},[o("Col",{attrs:{span:10}},[o("FormItem",{attrs:{label:"床位号",prop:"bedList."+a+".bedCode"}},[o("Input",{attrs:{type:"text",disabled:"",clearable:""},model:{value:t.bedCode,callback:function(o){e.$set(t,"bedCode","string"===typeof o?o.trim():o)},expression:"bed.bedCode"}})],1)],1),o("Col",{attrs:{span:10}},[o("FormItem",{attrs:{label:"床位类型",prop:"bedList."+a+".bedTypeBid",rules:[{required:!0,message:"请选择床位类型",trigger:"change"}]}},[o("Select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.bedTypeBid,callback:function(o){e.$set(t,"bedTypeBid",o)},expression:"bed.bedTypeBid"}},e._l(e.bedTypeList,function(e){return o("Option",{key:e.bid,attrs:{label:e.bedName,value:e.bid}})}))],1)],1),o("Col",{attrs:{span:1}},[o("Button",{staticClass:"del-btn",attrs:{type:"text"},on:{click:function(t){e.removeBed(a)}}},[e._v("删除")])],1)],1)}),o("Row",{attrs:{gutter:10}},[o("Col",{attrs:{span:12}},[o("FormItem",[o("a",{on:{click:e.addBed}},[e._v("+ 添加床位")])])],1)],1)],2)],1),o("Row",[o("Col",{attrs:{span:24}},[o("Row",{attrs:{gutter:10}},[o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"原价",prop:"originalPrice"}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:e.houseTypeDto.originalPrice,callback:function(t){e.$set(e.houseTypeDto,"originalPrice","string"===typeof t?t.trim():t)},expression:"houseTypeDto.originalPrice"}},[o("template",{slot:"prepend"},[e._v("¥")])],2)],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"平时价",prop:"usualPrice"}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:e.houseTypeDto.usualPrice,callback:function(t){e.$set(e.houseTypeDto,"usualPrice","string"===typeof t?t.trim():t)},expression:"houseTypeDto.usualPrice"}},[o("template",{slot:"prepend"},[e._v("¥")])],2)],1)],1)],1),e._l(e.houseTypeDto.priceList,function(t,a){return o("Row",{key:"price"+a,attrs:{gutter:10}},[o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"特殊价格 "+(a+1),prop:"priceList."+a+".specialPrice",rules:[{required:!0,message:"请输入特殊价格",trigger:"blur"},{pattern:/^\d{1,4}(\.\d{0,2})?$/,message:"请输入1万以内的两位小数或整数",trigger:"blur"}]}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:t.specialPrice,callback:function(o){e.$set(t,"specialPrice","string"===typeof o?o.trim():o)},expression:"price.specialPrice"}},[o("template",{slot:"prepend"},[e._v("¥")])],2)],1)],1),o("Col",{attrs:{span:12}},[o("FormItem",{attrs:{label:"时段",prop:"priceList."+a+".dateRange",rules:[{required:!0,type:"array",fields:{0:{type:"date",required:!0,message:"请选择特殊时段"},1:{type:"date",required:!0,message:"请选择特殊时段"}},trigger:"change"}]}},[o("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange","split-panels":"",options:e.pickerOptions},model:{value:t.dateRange,callback:function(o){e.$set(t,"dateRange",o)},expression:"price.dateRange"}})],1)],1),o("Col",{attrs:{span:2}},[o("Button",{staticClass:"del-btn",attrs:{type:"text"},on:{click:function(t){e.removePrice(a)}}},[e._v("删除")])],1)],1)}),o("Row",{attrs:{gutter:10}},[o("Col",{attrs:{span:12}},[o("FormItem",[o("a",{on:{click:e.addPrice}},[e._v("+ 添加特殊价格")])])],1)],1)],2)],1),o("FormItem",{staticStyle:{"margin-top":"20px"}},[e.houseTypeDto.bid?o("Button",{attrs:{type:"warning"},on:{click:function(t){e.validateForm("houseTypeForm")}}},[e._v("修 改")]):o("Button",{attrs:{type:"primary"},on:{click:function(t){e.validateForm("houseTypeForm")}}},[e._v("保 存")]),o("Button",{staticClass:"my-btn",on:{click:function(t){e.resetForm("houseTypeForm")}}},[e._v("重 置")])],1)],1)],1)],1)},re=[],se=o("2980"),ne={name:"houseTypeCard",props:{projectBid:String,houseType:Object,index:Number,houseTypeParentBidOptions:Array,bedTypeList:Array},data:function(){return{houseTypeDto:{bid:"",projectBid:this.projectBid,houseTypeParentBid:"",houseName:"",houseArea:"",checkInLimit:"",isBathroom:"",isBath:"",introduction:"",bedList:[{bedCode:1,bedTypeBid:""}],originalPrice:"",usualPrice:"",priceList:[],isShow:""},houseTypeRules:{houseTypeParentBid:[{required:!0,message:"请选择房型分类名称",trigger:"change"}],houseName:[{required:!0,message:"请输入房型名称",trigger:"blur"},{max:200,message:"不能超过200个字符",trigger:"blur"}],houseArea:[{required:!0,message:"请输入面积",trigger:"blur"},{pattern:/^\d{1,4}(\.\d{0,2})?$/,message:"请输入1万以内的两位小数或整数",trigger:"blur"}],isBathroom:[{required:!0,type:"number",message:"请选择卫生间类型",trigger:"change"}],isBath:[{required:!0,type:"number",message:"请选择洗浴间类型",trigger:"change"}],introduction:[{required:!0,message:"请输入房型描述",trigger:"blur"},{max:200,message:"不能超过200个字符",trigger:"blur"}],originalPrice:[{required:!0,message:"请输入原价",trigger:"blur"},{pattern:/^\d{1,4}(\.\d{0,2})?$/,message:"请输入1万以内的两位小数或整数",trigger:"blur"}],usualPrice:[{required:!0,message:"请输入平时价",trigger:"blur"},{pattern:/^\d{1,4}(\.\d{0,2})?$/,message:"请输入1万以内的两位小数或整数",trigger:"blur"}]},bathroomOptions:[{label:"公共卫生间",value:0},{label:"独立卫生间",value:1}],bathOptions:[{label:"公共洗浴间",value:0},{label:"独立洗浴间",value:1}],bedTypeOptions:[{label:"上铺",value:1},{label:"下铺",value:2},{label:"上床下桌",value:3},{label:"大床",value:4},{label:"单人床",value:5}],loading:!1,pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}}}},methods:{validateForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.saveOrUpHouseType()})},resetForm:function(e){this.$refs[e].resetFields(),this.houseTypeDto.bedList=[],this.houseTypeDto.priceList=[]},remove:function(){this.$emit("remove",this.index)},saveOrUpHouseType:function(){this.houseTypeDto.priceList.forEach(function(e){e.startDate=e.dateRange[0],e.endDate=e.dateRange[1]}),this.houseTypeDto.bid?this.updateHouseType():this.saveHouseType()},saveHouseType:function(){var e=this;this.loading=!0,Object(se["f"])(this.houseTypeDto).then(function(t){e.$Message.success("保存成功"),e.houseTypeDto.bid=t.body,e.$store.commit("upStep",5),e.loading=!1}).catch(function(){e.loading=!1})},updateHouseType:function(){var e=this;this.loading=!0,Object(se["h"])(this.houseTypeDto).then(function(){e.$Message.success("保存成功"),e.loading=!1}).catch(function(){e.loading=!1})},addBed:function(){this.houseTypeDto.bedList.push({bedCode:"",bedTypeBid:""}),this.flushBedCode()},removeBed:function(e){this.houseTypeDto.bedList.splice(e,1),this.flushBedCode()},flushBedCode:function(){this.houseTypeDto.bedList.forEach(function(e,t){e.bedCode=t+1})},addPrice:function(){this.houseTypeDto.priceList.push({specialPrice:"",startDate:"",endDate:"",dateRange:[]})},removePrice:function(e){this.houseTypeDto.priceList.splice(e,1)},show:function(e){this.$emit("show",this.houseTypeDto.bid,e)},syncData:function(){var e=this;Object.keys(this.houseType).length&&(this.houseTypeDto.projectBid=this.projectBid,this.houseTypeDto.bid=this.houseType.bid,this.houseTypeDto.houseTypeParentBid=this.houseType.houseTypeParentBid,this.houseTypeDto.houseName=this.houseType.houseName,this.houseTypeDto.houseArea=this.houseType.houseArea.toString(),this.houseTypeDto.isShow=this.houseType.isShow,this.houseTypeDto.checkInLimit=this.houseType.checkInLimit,this.houseTypeDto.isBathroom=this.houseType.isBathroom,this.houseTypeDto.isBath=this.houseType.isBath,this.houseTypeDto.introduction=this.houseType.introduction,this.houseTypeDto.bedList=this.houseType.bedList,this.houseTypeDto.originalPrice=this.houseType.originalPrice.toString(),this.houseTypeDto.usualPrice=this.houseType.usualPrice.toString(),this.houseTypeDto.priceList=JSON.parse(JSON.stringify(this.houseType.priceList)),this.houseTypeDto.priceList.forEach(function(t){e.$set(t,"dateRange",[]),t.dateRange.push(new Date(t.startDate)),t.dateRange.push(new Date(t.endDate)),t.specialPrice=t.specialPrice.toString()}))}},watch:{houseType:function(e){this.syncData()}},mounted:function(){this.syncData()}},le=ne,ue=(o("93f7"),Object(d["a"])(le,ie,re,!1,null,"7b3210c6",null));ue.options.__file="houseTypeCard.vue";var ce=ue.exports,de={name:"houseType",props:{projectBid:String},components:{houseTypeCard:ce},data:function(){return{houseTypes:[],houseTypeParentBidOptions:[],bedTypeList:[],loading:!1}},methods:{getHouseType:function(){var e=this;this.loading=!0,Object(se["d"])(this.projectBid).then(function(t){t.body.list.length>0?e.houseTypes=t.body.list:e.houseTypes.push({}),e.loading=!1}).catch(function(){e.houseTypes.push({}),e.loading=!1})},addHouseType:function(){this.houseTypes.push({})},confirmRemove:function(e){var t=this;this.$Modal.confirm({title:"通知",content:"<p>确定删除该房型吗？</p>",onOk:function(){t.removeHouseType(e)},onCancel:function(){}})},removeHouseType:function(e){var t=this;this.houseTypes[e].bid?(this.loading=!0,Object(se["a"])(this.houseTypes[e].bid).then(function(o){t.$Message.success("删除成功"),t.houseTypes.splice(e,1),t.loading=!1}).catch(function(){t.loading=!1})):this.houseTypes.splice(e,1)},getHouseTypeParentBidOptions:function(){var e=this;V(this.projectBid).then(function(t){e.houseTypeParentBidOptions=t.body})},getBedTypeList:function(){var e=this;Object(se["b"])().then(function(t){e.bedTypeList=t.body})},confirmShow:function(e,t){var o=this,a=1===t?"展示":"隐藏";this.$Modal.confirm({title:"通知",content:"<p>确定在App上".concat(a,"该房型吗?</p>"),onOk:function(){o.showHouseType(e,t)},onCancel:function(){}})},showHouseType:function(e,t){var o=this;this.loading=!0,Object(se["g"])(e,t).then(function(e){o.$Message.success("操作成功"),o.getHouseType(),o.loading=!1}).catch(function(){o.loading=!1})}},watch:{projectBid:function(e){e?(this.getHouseType(),this.getHouseTypeParentBidOptions(),this.getBedTypeList()):this.houseTypes=[{}]}},created:function(){this.projectBid?(this.getHouseType(),this.getHouseTypeParentBidOptions(),this.getBedTypeList()):this.houseTypes=[{}]}},pe=de,he=(o("7457"),Object(d["a"])(pe,oe,ae,!1,null,"06754bd8",null));he.options.__file="houseType.vue";var me=he.exports,be=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Form",{attrs:{model:e.roomParamDto,"label-width":60}},[o("Row",{attrs:{gutter:20}},[o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"楼栋"}},[o("Select",{attrs:{placeholder:"",clearable:""},model:{value:e.roomParamDto.houseBuildingFid,callback:function(t){e.$set(e.roomParamDto,"houseBuildingFid",t)},expression:"roomParamDto.houseBuildingFid"}},e._l(e.buildingOptions,function(e){return o("Option",{key:e.fid,attrs:{label:e.buildingName,value:e.fid}})}))],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"楼层"}},[o("Select",{attrs:{placeholder:"",clearable:""},model:{value:e.roomParamDto.floorNumber,callback:function(t){e.$set(e.roomParamDto,"floorNumber",t)},expression:"roomParamDto.floorNumber"}},e._l(e.floorOptions,function(e){return o("Option",{key:e,attrs:{label:e+" 层",value:e}})}))],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"房型分类"}},[o("Select",{attrs:{placeholder:"",clearable:""},model:{value:e.roomParamDto.houseTypeClassFid,callback:function(t){e.$set(e.roomParamDto,"houseTypeClassFid",t)},expression:"roomParamDto.houseTypeClassFid"}},e._l(e.parentHouseTypeOptions,function(e){return o("Option",{key:e.bid,attrs:{label:e.houseName,value:e.bid}})}))],1)],1)],1),o("Row",{attrs:{gutter:20}},[o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"房型"}},[o("Select",{attrs:{placeholder:"",clearable:""},model:{value:e.roomParamDto.houseTypeFid,callback:function(t){e.$set(e.roomParamDto,"houseTypeFid",t)},expression:"roomParamDto.houseTypeFid"}},e._l(e.houseTypeOptions,function(e){return o("Option",{key:e.bid,attrs:{label:e.houseName,value:e.bid}})}))],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"房间号"}},[o("Input",{attrs:{type:"text",placeholder:"",maxlength:15,clearable:""},model:{value:e.roomParamDto.roomCode,callback:function(t){e.$set(e.roomParamDto,"roomCode",t)},expression:"roomParamDto.roomCode"}})],1)],1)],1),o("Row",{attrs:{gutter:20}},[o("Col",{attrs:{span:"12"}},[o("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.listRoom}},[e._v(" 查 询")])],1),o("Col",{staticStyle:{"text-align":"right"},attrs:{span:"12"}},[o("Button",{attrs:{type:"primary"},on:{click:e.addRoom}},[e._v(" 新增房间")])],1)],1)],1),o("Table",{staticClass:"my-table",attrs:{stripe:"",columns:e.columns,data:e.roomList,loading:e.loading,size:"small"},scopedSlots:e._u([{key:"period",fn:function(t){var a=t.row;return[o("a",{on:{click:function(t){e.editAirReport(a)}}},[e._v(e._s(a.airQualityReportUrl?"修改":"配置"))])]}},{key:"action",fn:function(t){var a=t.row;return[o("a",{staticClass:"my-btn",on:{click:function(t){e.editRoom(a)}}},[e._v("编辑")]),o("a",{staticStyle:{color:"#ed4014"},on:{click:function(t){e.deleteRoomConfirm(a)}}},[e._v("删除")])]}}])}),o("Page",{staticClass:"my-page",attrs:{total:e.total,"show-total":"",current:e.roomParamDto.page,"page-size":e.roomParamDto.limit},on:{"update:current":function(t){e.$set(e.roomParamDto,"page",t)},"on-change":e.handlePageChange}}),o("Modal",{attrs:{title:e.title,loading:e.roomLoading,width:"800"},on:{"on-ok":e.saveOrUpRoom},model:{value:e.roomVisible,callback:function(t){e.roomVisible=t},expression:"roomVisible"}},[e.roomVisible?o("room-form",{ref:"roomForm",attrs:{projectBid:e.projectBid,buildingOptions:e.buildingOptions,parentHouseTypeOptions:e.parentHouseTypeOptions,room:e.roomData},on:{success:e.handleSuccess,error:e.handleError}}):e._e()],1),o("Modal",{attrs:{title:"配置空检报告",loading:e.airLoading,width:"30"},on:{"on-ok":e.saveRoomAirReport},model:{value:e.airVisible,callback:function(t){e.airVisible=t},expression:"airVisible"}},[o("Form",{ref:"roomAirForm",attrs:{model:e.roomAirDto,"label-width":80}},[o("FormItem",{attrs:{label:"空检报告",prop:"airReportUrl"}},[o("Input",{attrs:{type:"textarea",rows:3,maxlength:400,placeholder:""},model:{value:e.roomAirDto.airQualityReportUrl,callback:function(t){e.$set(e.roomAirDto,"airQualityReportUrl","string"===typeof t?t.trim():t)},expression:"roomAirDto.airQualityReportUrl"}})],1)],1)],1)],1)},ge=[],fe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Form",{ref:"roomForm",attrs:{model:e.roomDto,rules:e.roomRules,"label-width":80}},[o("Row",[o("Col",{attrs:{span:12}},[o("FormItem",{attrs:{label:"房间名称",prop:"areaName"}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:e.roomDto.areaName,callback:function(t){e.$set(e.roomDto,"areaName","string"===typeof t?t.trim():t)},expression:"roomDto.areaName"}})],1)],1)],1),o("Row",[o("Col",{attrs:{span:12}},[o("FormItem",{attrs:{label:"楼栋",prop:"houseBuildingFid"}},[o("Select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.roomDto.houseBuildingFid,callback:function(t){e.$set(e.roomDto,"houseBuildingFid",t)},expression:"roomDto.houseBuildingFid"}},e._l(e.buildingOptions,function(e){return o("Option",{key:e.fid,attrs:{label:e.buildingName,value:e.fid}})}))],1)],1),o("Col",{attrs:{span:12}},[o("FormItem",{attrs:{label:"楼层",prop:"floorNumber"}},[o("Select",{attrs:{placeholder:"请选择",clearable:"","no-data-text":"请先选择楼栋"},model:{value:e.roomDto.floorNumber,callback:function(t){e.$set(e.roomDto,"floorNumber",t)},expression:"roomDto.floorNumber"}},e._l(e.floorOptions,function(e){return o("Option",{key:e,attrs:{label:e+" 层",value:e}})}))],1)],1)],1),o("Row",[o("Col",{attrs:{span:12}},[o("FormItem",{attrs:{label:"房型分类",prop:"houseTypeParentBid"}},[o("Select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.roomDto.houseTypeParentBid,callback:function(t){e.$set(e.roomDto,"houseTypeParentBid",t)},expression:"roomDto.houseTypeParentBid"}},e._l(e.parentHouseTypeOptions,function(e){return o("Option",{key:e.bid,attrs:{label:e.houseName,value:e.bid}})}))],1)],1),o("Col",{attrs:{span:12}},[o("FormItem",{attrs:{label:"房型名称",prop:"houseTypeBid"}},[o("Select",{attrs:{placeholder:"请选择",clearable:"","no-data-text":"请先选择房型分类"},model:{value:e.roomDto.houseTypeBid,callback:function(t){e.$set(e.roomDto,"houseTypeBid",t)},expression:"roomDto.houseTypeBid"}},e._l(e.houseTypeOptions,function(e){return o("Option",{key:e.bid,attrs:{label:e.houseName,value:e.bid}})}))],1)],1)],1),o("Row",[o("Col",{attrs:{span:12}},[o("FormItem",{attrs:{label:"面积",prop:"acreage"}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:e.roomDto.acreage,callback:function(t){e.$set(e.roomDto,"acreage","string"===typeof t?t.trim():t)},expression:"roomDto.acreage"}},[o("template",{slot:"append"},[e._v("㎡")])],2)],1)],1),o("Col",{attrs:{span:12}},[o("FormItem",{attrs:{label:"朝向",prop:"windowToward"}},[o("Select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.roomDto.windowToward,callback:function(t){e.$set(e.roomDto,"windowToward",t)},expression:"roomDto.windowToward"}},e._l(e.windowTowardOptions,function(e){return o("Option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1)],1)},ye=[],ve={name:"roomForm",props:{projectBid:String,buildingOptions:Array,parentHouseTypeOptions:Array,room:Object},data:function(){return{houseTypeOptions:[],windowTowardOptions:[{label:"东",value:1},{label:"南",value:2},{label:"西",value:3},{label:"北",value:4},{label:"东南",value:5},{label:"西北",value:6},{label:"东北",value:7},{label:"西南",value:8},{label:"人造天井",value:9}],roomDto:{projectBid:this.projectBid,bid:"",houseBuildingFid:"",floorNumber:"",areaName:"",houseTypeParentBid:"",houseTypeBid:"",acreage:"",windowToward:""},roomRules:{areaName:[{required:!0,message:"请输入房间名称",trigger:"blur"},{max:15,message:"不能超过15个字符",trigger:"blur"}],houseBuildingFid:[{required:!0,message:"请选择楼栋",trigger:"change"}],floorNumber:[{required:!0,type:"number",message:"请选择楼层",trigger:"change"}],houseTypeParentBid:[{required:!0,message:"请选择房型分类",trigger:"change"}],houseTypeBid:[{required:!0,message:"请选择房型名称",trigger:"change"}],acreage:[{required:!0,message:"请输入面积",trigger:"blur"},{pattern:/^\d{1,4}(\.\d{0,2})?$/,message:"请输入1万以内的两位小数或整数",trigger:"blur"}],windowToward:[{required:!0,type:"number",message:"请选择朝向",trigger:"change"}]},canClear:!1,canClearF:!1}},computed:{floorOptions:function(){var e=this,t=[];return this.buildingOptions.forEach(function(o){o.fid===e.roomDto.houseBuildingFid&&(t=o.buildingRentablefloor.split(",").map(Number))}),t}},methods:{validateForm:function(){var e=this;this.$refs["roomForm"].validate(function(t){t?e.$emit("success",e.roomDto):e.$emit("error")})},resetForm:function(){this.$refs["roomForm"].resetFields()},handleCounted:function(){this.resetForm("roomForm"),this.roomDto.roomBid="",Object.keys(this.room).length&&(this.roomDto.bid=this.room.bid,this.roomDto.houseBuildingFid=this.room.houseBuildingFid,this.roomDto.floorNumber=this.room.floorNumber,this.roomDto.areaName=this.room.areaName,this.roomDto.houseTypeParentBid=this.room.houseTypeParentBid,this.roomDto.houseTypeBid=this.room.houseTypeBid,this.roomDto.acreage=this.room.acreage,this.roomDto.windowToward=this.room.windowToward,this.canClear=!1,this.canClearF=!1)},getHouseTypeOptions:function(e){var t=this;Object(se["e"])(e).then(function(e){t.houseTypeOptions=e.body})}},watch:{"roomDto.houseTypeParentBid":function(e,t){this.canClear&&(this.roomDto.houseTypeBid=""),this.canClear=!0,e?this.getHouseTypeOptions(e):this.houseTypeOptions=[]},"roomDto.houseBuildingFid":function(e,t){this.canClearF&&(this.roomDto.floorNumber=""),this.canClearF=!0}},mounted:function(){this.handleCounted()}},De=ve,Te=(o("b4f8"),Object(d["a"])(De,fe,ye,!1,null,"72483f08",null));Te.options.__file="roomForm.vue";var Ce=Te.exports,Be=function(e){return w["a"].request({url:"/room/getListRoomPage.action",method:"post",data:e})},Fe=function(e){return w["a"].request({url:"/room/save.action",method:"post",data:e})},we=function(e){return w["a"].request({url:"/room/updateRoom.action",method:"post",data:e})},ke=function(e){return w["a"].request({url:"/room/deleteByBid.action",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{bid:e}})},je={name:"room",props:{projectBid:String},components:{roomForm:Ce},data:function(){return{buildingOptions:[],parentHouseTypeOptions:[],houseTypeOptions:[],roomParamDto:{projectFid:this.projectBid,houseBuildingFid:"",floorNumber:"",houseTypeFid:"",houseTypeClassFid:"",roomCode:"",page:1,limit:10},loading:!1,roomList:[],total:0,columns:[{title:"序号",type:"index",width:60},{title:"房型分类",key:"paHouseName"},{title:"房型名称",key:"houseShowName"},{title:"楼栋",key:"buildingName"},{title:"楼层",key:"floorNumber"},{title:"房源编号",key:"areaCode"},{title:"房源名称",key:"areaName"},{title:"床位数量",key:"amount"},{title:"空检报告",slot:"period"},{title:"操作",slot:"action",width:100}],roomVisible:!1,roomLoading:!0,title:"",roomData:{},airVisible:!1,airLoading:!0,roomAirDto:{bid:"",airQualityReportUrl:"",airQualityReportUrlBak:""}}},methods:{getBuildOptions:function(){var e=this;this.projectBid&&k(this.projectBid).then(function(t){e.buildingOptions=t.body})},getParentHouseTypeOptions:function(){var e=this;this.projectBid&&V(this.projectBid).then(function(t){e.parentHouseTypeOptions=t.body})},getHouseTypeOptions:function(e){var t=this;Object(se["e"])(e).then(function(e){t.houseTypeOptions=e.body})},listRoom:function(){this.projectBid&&(this.roomParamDto.projectFid=this.projectBid,this.roomParamDto.page=1,this.handlePageChange())},handlePageChange:function(){var e=this;this.loading=!0,Be(this.roomParamDto).then(function(t){e.roomList=t.body.list,e.total=t.body.total,e.loading=!1}).catch(function(){e.loading=!1})},addRoom:function(){this.roomVisible=!0,this.roomData={},this.title="新增房间"},editRoom:function(e){this.roomVisible=!0,this.roomData=e,this.title="编辑房间"},saveOrUpRoom:function(){this.$refs.roomForm.validateForm()},handleSuccess:function(e){e.bid?this.updateRoom(e):this.saveRoom(e),this.roomVisible=!1,this.handlePageChange()},handleError:function(){var e=this;setTimeout(function(){e.roomLoading=!1,e.$nextTick(function(){e.roomLoading=!0})},500)},saveRoom:function(e){var t=this;Fe(e).then(function(e){t.$Message.success("保存成功"),t.handlePageChange()})},updateRoom:function(e){var t=this;we(e).then(function(e){t.$Message.success("修改成功"),t.handlePageChange()})},deleteRoomConfirm:function(e){var t=this;this.$Modal.confirm({title:"通知",content:"<p>确定删除该房间吗？</p>",onOk:function(){t.deleteRoom(e)},onCancel:function(){}})},deleteRoom:function(e){var t=this;ke(e.bid).then(function(e){t.$Message.success("删除成功"),t.handlePageChange()})},editAirReport:function(e){this.roomAirDto.bid=e.bid,this.roomAirDto.airQualityReportUrl=e.airQualityReportUrl,this.roomAirDto.airQualityReportUrlBak=e.airQualityReportUrl,this.airVisible=!0},saveRoomAirReport:function(){var e=this;this.roomAirDto.airQualityReportUrl===this.roomAirDto.airQualityReportUrlBak?(this.$Message.info("数据没有更新"),this.airVisible=!1):we(this.roomAirDto).then(function(t){e.$Message.success("保存成功"),e.airVisible=!1,e.handlePageChange()}).catch(function(){e.airSaveError()})},airSaveError:function(){var e=this;this.airLoading=!1,this.$nextTick(function(){e.airLoading=!0})}},computed:{floorOptions:function(){var e=this,t=[];return this.buildingOptions.forEach(function(o){o.fid===e.roomParamDto.houseBuildingFid&&(t=o.buildingRentablefloor.split(","))}),t}},watch:{projectBid:function(){this.getBuildOptions(),this.getParentHouseTypeOptions(),this.listRoom()},"roomParamDto.houseBuildingFid":function(e,t){this.roomParamDto.floorNumber=""},"roomParamDto.houseTypeFid":function(e,t){this.roomParamDto.houseTypeClassFid="",e?this.getHouseTypeOptions(e):this.houseTypeOptions=[]}},created:function(){this.getBuildOptions(),this.getParentHouseTypeOptions(),this.listRoom()}},xe=je,Oe=(o("ed4d"),Object(d["a"])(xe,be,ge,!1,null,"7d6488b6",null));Oe.options.__file="room.vue";var Se=Oe.exports,$e=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"full-top"},[e.loading?o("Spin",{staticClass:"full-spin",attrs:{size:"large",fix:""}}):e._e(),o("Layout",{staticStyle:{"background-color":"#ffffff"}},[o("Sider",{staticStyle:{"background-color":"#ffffff"},attrs:{width:"100"}},[o("ButtonGroup",{attrs:{vertical:""}},[o("Button",{attrs:{type:"qualification"===e.currentLabel?"primary":"default"},on:{click:function(t){e.turnTo("qualification")}}},[e._v("经营资质\n        ")]),o("Button",{attrs:{type:"contract"===e.currentLabel?"primary":"default"},on:{click:function(t){e.turnTo("contract")}}},[e._v("签约合同")]),o("Button",{attrs:{type:"else"===e.currentLabel?"primary":"default"},on:{click:function(t){e.turnTo("else")}}},[e._v("其他")])],1)],1),o("Content",[o("Button",{attrs:{type:"primary"},on:{click:e.openUpload}},[e._v("上传图片")]),o("br"),e._l(e.showList,function(t){return o("Col",{key:t.bid,staticClass:"my-img-col",attrs:{span:6}},[o("div",{staticClass:"img-div"},[o("Button",{staticClass:"img-btn",attrs:{type:"error",size:"small",shape:"circle",icon:"md-trash"},on:{click:function(o){e.deleteImgConfirm(t.bid)}}}),o("img",{staticClass:"img-class",attrs:{src:t.attachmentImgUrl,alt:e.currentName}})],1)])}),e.showList.length?e._e():o("div",{staticClass:"no-img"},[o("div",{staticClass:"no-img-inner"},[e._v("\n          暂无图片资料\n        ")])])],2)],1),o("Modal",{attrs:{title:e.title,width:"50"},model:{value:e.uploadDialogVisible,callback:function(t){e.uploadDialogVisible=t},expression:"uploadDialogVisible"}},[e._l(e.uploadList,function(t,a){return o("div",{key:a,staticClass:"demo-upload-list"},["finished"===t.status?[o("img",{attrs:{src:t.response.body.attachmentImgUrl}}),o("div",{staticClass:"demo-upload-list-cover"},[o("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(o){e.handleRemove(t)}}})],1)]:[t.showProgress?o("Progress",{attrs:{percent:t.percentage,"hide-info":""}}):e._e()]],2)}),o("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"146px"},attrs:{accept:"image/*",multiple:"",type:"drag",headers:{Authorization:e.$store.state.user.token},action:e.uploadPicUrl,"show-upload-list":!1,"on-success":e.handleSuccess,"on-error":e.handleError,"max-size":2048,"on-exceeded-size":e.handleMaxSize}},[o("div",{staticStyle:{width:"146px","line-height":"146px"}},[o("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),o("div",[e._v("图片大小不能超过 2MB")]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"text"},on:{click:function(t){e.uploadDialogVisible=!1}}},[e._v("取 消")]),o("Button",{attrs:{type:"primary",disabled:!e.uploadList.length},on:{click:e.saveData}},[e._v("保 存")])],1)],2)],1)},_e=[],Pe=function(e){return w["a"].request({url:"/project/findProjectAtt",method:"get",params:{projectBid:e}})},Ie=function(e){return w["a"].request({url:"/project/saveProjectData",method:"post",data:e})},Ne=function(e){return w["a"].request({url:"/project/delProjectAtt",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{attBid:e}})},Ae={name:"projectData",props:{projectBid:String},data:function(){return{position:"left",businessQualificationAtt:[],contractAtt:[],elseAtt:[],showList:[],uploadDialogVisible:!1,uploadPicUrl:this.$store.state.app.baseUrl+"/system/upLoadImg.action",currentLabel:"qualification",currentName:"",title:"",imgList:[],uploadList:[],loading:!1}},mounted:function(){this.uploadList=this.$refs.upload.fileList},methods:{listData:function(){var e=this;this.loading=!0,Pe(this.projectBid).then(function(t){e.businessQualificationAtt=t.body.businessQualificationAtt,e.contractAtt=t.body.contractAtt,e.elseAtt=t.body.elseAtt,e.turnTo(e.currentLabel),e.loading=!1}).catch(function(){e.loading=!1})},turnTo:function(e){switch(e){case"qualification":this.showList=this.businessQualificationAtt,this.currentLabel="qualification",this.currentName="经营资质";break;case"contract":this.showList=this.contractAtt,this.currentLabel="contract",this.currentName="签约合同";break;case"else":this.showList=this.elseAtt,this.currentLabel="else",this.currentName="其他";break}},deleteImgConfirm:function(e){var t=this;this.$Modal.confirm({title:"通知",content:"<p>确定删除该图片吗？</p>",onOk:function(){t.deleteImg(e)},onCancel:function(){}})},deleteImg:function(e){var t=this;Ne(e).then(function(e){t.$Message.success("删除成功"),t.listData()})},openUpload:function(){this.$refs.upload.fileList.length=0,this.title="上传图片 - ".concat(this.currentName),this.uploadDialogVisible=!0},handleMaxSize:function(e){this.$Message.warning("文件大小超过了限制")},handleSuccess:function(e,t,o){200!==e.code&&this.$Message.error(e.message)},handleError:function(e,t,o){this.$Message.error("图片上传失败"),console.info(e)},handleRemove:function(e){var t=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(t.indexOf(e),1)},saveData:function(){var e=this,t={bid:this.projectBid};switch(this.currentLabel){case"qualification":t.businessQualificationAtt=[],this.uploadList.forEach(function(e){t.businessQualificationAtt.push(e.response.body)});break;case"contract":t.contractAtt=[],this.uploadList.forEach(function(e){t.contractAtt.push(e.response.body)});break;case"else":t.elseAtt=[],this.uploadList.forEach(function(e){t.elseAtt.push(e.response.body)});break}Ie(t).then(function(t){e.$Message.success("保存成功"),e.uploadDialogVisible=!1,e.listData()})}},created:function(){this.listData()}},Re=Ae,Le=(o("dae2"),Object(d["a"])(Re,$e,_e,!1,null,"79667356",null));Le.options.__file="projectData.vue";var qe=Le.exports,Me=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Form",{attrs:{model:e.areaParamDto,"label-width":60}},[o("Row",{attrs:{gutter:20}},[o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"状态"}},[o("Select",{attrs:{placeholder:"",clearable:""},model:{value:e.areaParamDto.isValid,callback:function(t){e.$set(e.areaParamDto,"isValid",t)},expression:"areaParamDto.isValid"}},e._l(e.isValidOptions,function(e){return o("Option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"楼栋"}},[o("Select",{attrs:{placeholder:"",clearable:""},model:{value:e.areaParamDto.houseBuildingFid,callback:function(t){e.$set(e.areaParamDto,"houseBuildingFid",t)},expression:"areaParamDto.houseBuildingFid"}},e._l(e.buildingOptions,function(e){return o("Option",{key:e.fid,attrs:{label:e.buildingName,value:e.fid}})}))],1)],1),o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"楼层"}},[o("Select",{attrs:{placeholder:"",clearable:""},model:{value:e.areaParamDto.floorNum,callback:function(t){e.$set(e.areaParamDto,"floorNum",t)},expression:"areaParamDto.floorNum"}},e._l(e.floorOptions,function(e){return o("Option",{key:e,attrs:{label:e+" 层",value:e}})}))],1)],1)],1),o("Row",{attrs:{gutter:20}},[o("Col",{attrs:{span:8}},[o("FormItem",{attrs:{label:"区域名称"}},[o("Input",{attrs:{type:"text",placeholder:"",maxlength:15,clearable:""},model:{value:e.areaParamDto.areaName,callback:function(t){e.$set(e.areaParamDto,"areaName",t)},expression:"areaParamDto.areaName"}})],1)],1)],1),o("Row",{attrs:{gutter:20}},[o("Col",{attrs:{span:12}},[o("Button",{attrs:{type:"primary"},on:{click:e.listArea}},[e._v(" 查 询")])],1),o("Col",{staticStyle:{"text-align":"right"},attrs:{span:"12"}},[o("Button",{attrs:{type:"primary"},on:{click:e.addArea}},[e._v("添加区域")])],1)],1)],1),o("Table",{staticClass:"my-table",attrs:{stripe:"",columns:e.columns,data:e.areaList,loading:e.loading,size:"small"},scopedSlots:e._u([{key:"isValid",fn:function(t){var a=t.row;return[o("div",[e._v(e._s(1===a.isValid?"启用":"停用"))])]}},{key:"action",fn:function(t){var a=t.row;return[o("a",{staticClass:"my-btn",on:{click:function(t){e.openConfirm(a)}}},[e._v(e._s(1===a.isValid?"停用":"启用"))]),o("a",{staticClass:"my-btn",on:{click:function(t){e.editArea(a)}}},[e._v("编辑")]),o("a",{staticStyle:{color:"#ed4014"},on:{click:function(t){e.deleteAreaConfirm(a)}}},[e._v("删除")])]}}])}),o("Page",{staticClass:"my-page",attrs:{total:e.total,"show-total":"",current:e.areaParamDto.page,"page-size":e.areaParamDto.limit},on:{"update:current":function(t){e.$set(e.areaParamDto,"page",t)},"on-change":e.handlePageChange}}),o("Modal",{attrs:{title:e.title,loading:e.areaLoading,width:"500"},on:{"on-ok":e.saveOrUpArea},model:{value:e.areaVisible,callback:function(t){e.areaVisible=t},expression:"areaVisible"}},[e.areaVisible?o("public-area-form",{ref:"areaForm",attrs:{projectBid:e.projectBid,buildingOptions:e.buildingOptions,area:e.areaData},on:{success:e.handleSuccess,error:e.handleError}}):e._e()],1)],1)},He=[],Ee=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Form",{ref:"areaForm",attrs:{model:e.areaDto,rules:e.areaRules,"label-width":60}},[o("FormItem",{attrs:{label:"名称",prop:"areaName"}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:e.areaDto.areaName,callback:function(t){e.$set(e.areaDto,"areaName","string"===typeof t?t.trim():t)},expression:"areaDto.areaName"}})],1),o("FormItem",{attrs:{label:"面积",prop:"acreage"}},[o("Input",{attrs:{type:"text",placeholder:"",clearable:""},model:{value:e.areaDto.acreage,callback:function(t){e.$set(e.areaDto,"acreage","string"===typeof t?t.trim():t)},expression:"areaDto.acreage"}},[o("template",{slot:"append"},[e._v("㎡")])],2)],1),o("FormItem",{attrs:{label:"类型",prop:"areaType"}},[o("Select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.areaDto.areaType,callback:function(t){e.$set(e.areaDto,"areaType",t)},expression:"areaDto.areaType"}},e._l(e.areaTypeOptions,function(e){return o("Option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),o("FormItem",{attrs:{label:"楼栋",prop:"houseBuildingFid"}},[o("Select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.areaDto.houseBuildingFid,callback:function(t){e.$set(e.areaDto,"houseBuildingFid",t)},expression:"areaDto.houseBuildingFid"}},e._l(e.buildingOptions,function(e){return o("Option",{key:e.fid,attrs:{label:e.buildingName,value:e.fid}})}))],1),o("FormItem",{attrs:{label:"楼层",prop:"floorNumber"}},[o("Select",{attrs:{placeholder:"请选择",clearable:"","no-data-text":"请先选择楼栋"},model:{value:e.areaDto.floorNumber,callback:function(t){e.$set(e.areaDto,"floorNumber",t)},expression:"areaDto.floorNumber"}},e._l(e.floorOptions,function(e){return o("Option",{key:e,attrs:{label:e+" 层",value:e}})}))],1)],1)},Ve=[],Ue={name:"publicAreaForm",props:{projectBid:String,buildingOptions:Array,area:Object},data:function(){return{areaDto:{projectBid:this.projectBid,areaName:"",acreage:"",areaType:"",houseBuildingFid:"",floorNumber:""},areaRules:{areaName:[{required:!0,message:"请输入区域名称",trigger:"blur"},{max:15,message:"不能超过15个字符",trigger:"blur"}],acreage:[{required:!0,message:"请输入区域面积",trigger:"blur"},{pattern:/^\d{1,4}(\.\d{0,2})?$/,message:"请输入1万以内的两位小数或整数",trigger:"blur"}],areaType:[{required:!0,message:"请选择类型",trigger:"change"}],houseBuildingFid:[{required:!0,message:"请选择楼栋",trigger:"change"}],floorNumber:[{required:!0,type:"number",message:"请选择楼层",trigger:"change"}]},areaTypeOptions:[{label:"公共区域",value:"GG"},{label:"卫生间",value:"WS"},{label:"洗浴间",value:"XY"},{label:"仓库",value:"CK"}],canClear:!1}},computed:{floorOptions:function(){var e=this,t=[];return this.buildingOptions.forEach(function(o){o.fid===e.areaDto.houseBuildingFid&&(t=o.buildingRentablefloor.split(",").map(Number))}),t}},methods:{validateForm:function(){var e=this;this.$refs["areaForm"].validate(function(t){t?e.$emit("success",e.areaDto):e.$emit("error")})},resetForm:function(){this.$refs["areaForm"].resetFields()},handleCounted:function(){this.resetForm("areaForm"),this.areaDto.bid="",Object.keys(this.area).length&&(this.areaDto.bid=this.area.bid,this.areaDto.projectBid=this.area.projectBid,this.areaDto.areaName=this.area.areaName,this.areaDto.acreage=this.area.acreage.toString(),this.areaDto.areaType=this.area.areaType,this.areaDto.houseBuildingFid=this.area.houseBuildingFid,this.areaDto.floorNumber=this.area.floorNumber,this.canClear=!1)}},mounted:function(){this.handleCounted()},watch:{"areaDto.houseBuildingFid":function(e,t){this.canClear&&(this.areaDto.floorNumber=""),this.canClear=!0}}},ze=Ue,Qe=(o("8637"),Object(d["a"])(ze,Ee,Ve,!1,null,"6f98a2ba",null));Qe.options.__file="publicAreaForm.vue";var Ye=Qe.exports,Je=function(e){return w["a"].request({url:"/area/getListRoomPage.action",method:"post",data:e})},Ge=function(e){return w["a"].request({url:"/area/save.action",method:"post",data:e})},Ze=function(e){return w["a"].request({url:"/area/updateArea.action",method:"post",data:e})},Ke=function(e){return w["a"].request({url:"/area/deleteByBid.action",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{bid:e}})},We=function(e,t){return w["a"].request({url:"/area/validOrNot.action",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{bid:e,isValid:t}})},Xe={name:"publicArea",props:{projectBid:String},components:{publicAreaForm:Ye},data:function(){return{buildingOptions:[],isValidOptions:[{label:"启用",value:0},{label:"停用",value:1}],areaParamDto:{projectFid:"",isValid:"",houseBuildingFid:"",floorNum:"",areaName:"",page:1,limit:10},loading:!1,areaList:[],total:0,columns:[{title:"序号",type:"index",width:60},{title:"区域名称",key:"areaName"},{title:"面积/㎡",key:"acreage"},{title:"楼栋",key:"buildingName"},{title:"楼层",key:"floorNumber"},{title:"状态",slot:"isValid"},{title:"操作",slot:"action",width:130}],areaVisible:!1,areaLoading:!0,title:"",areaData:{}}},computed:{floorOptions:function(){var e=this,t=[];return this.buildingOptions.forEach(function(o){o.fid===e.areaParamDto.houseBuildingFid&&(t=o.buildingRentablefloor.split(","))}),t}},methods:{getBuildOptions:function(){var e=this;this.projectBid&&k(this.projectBid).then(function(t){e.buildingOptions=t.body})},listArea:function(){this.projectBid&&(this.areaParamDto.projectFid=this.projectBid,this.areaParamDto.page=1,this.handlePageChange())},handlePageChange:function(){var e=this;this.loading=!0,Je(this.areaParamDto).then(function(t){e.areaList=t.body.list,e.total=t.body.total,e.loading=!1}).catch(function(){e.loading=!1})},addArea:function(){this.areaVisible=!0,this.areaData={},this.title="新增区域"},editArea:function(e){this.areaVisible=!0,this.areaData=e,this.title="编辑区域"},saveOrUpArea:function(){this.$refs.areaForm.validateForm()},handleSuccess:function(e){e.bid?this.updateArea(e):this.saveArea(e),this.areaVisible=!1,this.handlePageChange()},handleError:function(){var e=this;setTimeout(function(){e.areaLoading=!1,e.$nextTick(function(){e.areaLoading=!0})},500)},saveArea:function(e){var t=this;Ge(e).then(function(e){t.$Message.success("保存成功"),t.handlePageChange()})},updateArea:function(e){var t=this;Ze(e).then(function(e){t.$Message.success("修改成功"),t.handlePageChange()})},deleteAreaConfirm:function(e){var t=this;this.$Modal.confirm({title:"通知",content:"<p>确定删除该区域吗？</p>",onOk:function(){t.deleteArea(e)},onCancel:function(){}})},deleteArea:function(e){var t=this;Ke(e.bid).then(function(e){t.$Message.success("删除成功"),t.handlePageChange()})},openConfirm:function(e){var t=this,o=0,a="";1===e.isValid?(o=0,a="停用"):(o=1,a="启用"),this.$Modal.confirm({title:"通知",content:"<p>确定".concat(a,"该区域吗？</p>"),onOk:function(){t.openArea(a,e.bid,o)},onCancel:function(){}})},openArea:function(e,t,o){var a=this;We(t,o).then(function(t){a.$Message.success(e+"成功"),a.handlePageChange()})}},watch:{projectBid:function(e){this.getBuildOptions(),this.listArea()},"areaParamDto.houseBuildingFid":function(e,t){this.areaParamDto.floorNum=""}},created:function(){this.getBuildOptions(),this.listArea()}},et=Xe,tt=(o("2022"),Object(d["a"])(et,Me,He,!1,null,"47a54fbc",null));tt.options.__file="publicArea.vue";var ot=tt.exports,at={name:"project",components:{baseInfo:D,building:L,houseSort:te,houseType:me,room:Se,projectData:qe,publicArea:ot},data:function(){return{projectBid:"",name:""}},methods:{isDisabled:function(e){return e>this.$store.state.project.step},handleSuccess:function(e,t){this.projectBid=e,this.name=t},getInfo:function(){var e=this;this.projectBid=this.$route.query.projectBid,this.projectBid?Object(g["h"])(this.projectBid).then(function(t){e.name=t.body.name;var o=t.body.step;e.$store.commit("upStep",o+1);var a=t.body.status;1===a?e.$store.commit("upActiveName","1"):e.$store.commit("upActiveName",o.toString())}):(this.$store.commit("upStep",1),this.$store.commit("upActiveName","1"))}},watch:{$route:function(e,t){this.getInfo()}},created:function(){this.getInfo()}},it=at,rt=(o("8f1c6"),Object(d["a"])(it,a,i,!1,null,"534605b9",null));rt.options.__file="project.vue";t["default"]=rt.exports},f5c3:function(e,t,o){},ff0d:function(e,t,o){"use strict";var a=o("0a7f"),i=o.n(a);i.a},ff82:function(e,t,o){"use strict";var a=o("0ba3"),i=o.n(a);i.a}}]);