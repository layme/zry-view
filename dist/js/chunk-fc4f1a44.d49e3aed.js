(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fc4f1a44"],{"323e":function(e,t,a){"use strict";var i=a("88f4"),r=a.n(i);r.a},"88f4":function(e,t,a){},ec9c:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Form",{attrs:{model:e.paramDto,"label-width":50,inline:""},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.listPriceType(t):null}}},[a("FormItem",{attrs:{label:"名称"}},[a("Input",{staticClass:"my-con",attrs:{clearable:""},model:{value:e.paramDto.name,callback:function(t){e.$set(e.paramDto,"name",t)},expression:"paramDto.name"}})],1),a("FormItem",{attrs:{label:"状态"}},[a("Select",{staticClass:"my-con",attrs:{placeholder:"",clearable:""},model:{value:e.paramDto.status,callback:function(t){e.$set(e.paramDto,"status",t)},expression:"paramDto.status"}},e._l(e.priceTypeStatus,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),a("Button",{staticClass:"my-btn",attrs:{icon:"ios-search",type:"primary"},on:{click:e.listPriceType}},[e._v(" 查 询")]),a("Button",{staticClass:"my-btn",attrs:{type:"primary"},on:{click:e.addPriceType}},[e._v("添加价格类型")])],1),a("Table",{attrs:{columns:e.columns,data:e.priceTypeList,loading:e.loading},scopedSlots:e._u([{key:"isBindCounterPrice",fn:function(t){var i=t.row;return[a("div",[e._v(e._s(e._f("yesOrNoFilter")(i.isBindCounterPrice)))])]}},{key:"isHideHousePrice",fn:function(t){var i=t.row;return[a("div",[e._v(e._s(e._f("yesOrNoFilter")(i.isHideHousePrice)))])]}},{key:"isKeepInt",fn:function(t){var i=t.row;return[a("div",[e._v(e._s(e._f("yesOrNoFilter")(i.isKeepInt)))])]}},{key:"status",fn:function(t){var i=t.row;return[1===i.status?a("Tag",{attrs:{color:"primary"}},[e._v("有效")]):a("Tag",{attrs:{color:"warning"}},[e._v("无效")])]}},{key:"action",fn:function(t){var i=t.row;return[a("a",{staticClass:"my-a",on:{click:function(t){e.updatePriceType(i)}}},[e._v("修改")]),a("a",{staticClass:"my-a",on:{click:function(t){e.confirmSetIsInvalid(i)}}},[e._v("\n        "+e._s(1===i.status?"置为无效":"置为有效")+"\n      ")]),1===i.isBindCounterPrice&&1===i.isCanGeneratePrice?a("a",{on:{click:function(t){e.confirmGeneratePrice(i)}}},[e._v("\n        生成房价\n      ")]):e._e()]}}])}),a("Page",{staticClass:"my-page",attrs:{total:e.total,"show-total":"",current:e.paramDto.page,"page-size":e.paramDto.limit},on:{"update:current":function(t){e.$set(e.paramDto,"page",t)},"on-change":e.handlePageChange}}),a("Modal",{attrs:{title:e.title,loading:e.priceLoading,width:"500"},on:{"on-ok":e.validForm},model:{value:e.priceVisible,callback:function(t){e.priceVisible=t},expression:"priceVisible"}},[e.priceVisible?a("price-type-form",{ref:"priceTypeForm",attrs:{price:e.row},on:{submit:e.addOrUpdatePriceType,error:e.handleError}}):e._e()],1)],1)},r=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Form",{ref:"priceForm",attrs:{model:e.paramDto,rules:e.rules,"label-width":80}},[a("FormItem",{attrs:{label:"名称",prop:"channelCode"}},[a("Select",{attrs:{disabled:Object.keys(e.price).length},model:{value:e.paramDto.channelCode,callback:function(t){e.$set(e.paramDto,"channelCode",t)},expression:"paramDto.channelCode"}},e._l(e.$store.state.price.priceTypeNames,function(e){return a("Option",{key:e.name,attrs:{label:e.name,value:e.code,disabled:"msj"===e.code}})}))],1),a("FormItem",{attrs:{label:"房价代码",prop:"typeCode"}},[a("Input",{attrs:{clearable:""},model:{value:e.paramDto.typeCode,callback:function(t){e.$set(e.paramDto,"typeCode",t)},expression:"paramDto.typeCode"}})],1),a("Row",[a("Col",{attrs:{span:12}},[a("FormItem",{attrs:{label:"绑定门市价",prop:"isBindCounterPrice"}},[a("RadioGroup",{model:{value:e.paramDto.isBindCounterPrice,callback:function(t){e.$set(e.paramDto,"isBindCounterPrice",t)},expression:"paramDto.isBindCounterPrice"}},e._l(e.yesOrNoOptions,function(t){return a("Radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}))],1)],1),a("Col",{attrs:{span:12}},[1===e.paramDto.isBindCounterPrice?a("FormItem",{attrs:{label:"绑定比率",prop:"bindRate"}},[a("Input",{model:{value:e.paramDto.bindRate,callback:function(t){e.$set(e.paramDto,"bindRate",t)},expression:"paramDto.bindRate"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("%")])])],1):e._e()],1)],1),a("Row",[a("Col",{attrs:{span:12}},[a("FormItem",{attrs:{label:"隐藏房价",prop:"isHideHousePrice"}},[a("RadioGroup",{model:{value:e.paramDto.isHideHousePrice,callback:function(t){e.$set(e.paramDto,"isHideHousePrice",t)},expression:"paramDto.isHideHousePrice"}},e._l(e.yesOrNoOptions,function(t){return a("Radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}))],1)],1),a("Col",{attrs:{span:12}},[a("FormItem",{attrs:{label:"保留整数",prop:"isKeepInt"}},[a("RadioGroup",{model:{value:e.paramDto.isKeepInt,callback:function(t){e.$set(e.paramDto,"isKeepInt",t)},expression:"paramDto.isKeepInt"}},e._l(e.yesOrNoOptions,function(t){return a("Radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}))],1)],1)],1),a("FormItem",{attrs:{label:"状态",prop:"status"}},[a("RadioGroup",{model:{value:e.paramDto.status,callback:function(t){e.$set(e.paramDto,"status",t)},expression:"paramDto.status"}},e._l(e.priceTypeStatus,function(t){return a("Radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}))],1)],1)},o=[],s=(a("ac6a"),a("456d"),a("be94")),l=a("2f62"),c={name:"priceTypeForm",props:{price:Object},data:function(){return{paramDto:{fid:"",name:"",channelCode:"",typeCode:"",isBindCounterPrice:0,isHideHousePrice:0,isKeepInt:0,bindRate:"",status:1},rules:{channelCode:[{required:!0,message:"请选择价格类型名称",trigger:"change"}],typeCode:[{required:!0,message:"请输入代码",trigger:"blur"},{pattern:/^[a-zA-Z0-9]{6}$/,message:"请输入6位（字母或数字）",trigger:"blur"}],bindRate:[{required:!0,message:"请输入绑定比率",trigger:"blur"},{pattern:/^[0-9]$|^[0-9]{2}$|^[1,2][0-9]{2}$|^[3][0][0]$/,message:"请输入1-300正整数",trigger:"blur"}]},yesOrNoOptions:[{label:"是",value:1},{label:"否",value:0}],priceTypeStatus:[{label:"有效",value:1},{label:"无效",value:0}]}},methods:Object(s["a"])({},Object(l["b"])(["getPriceTypeNames"]),{init:function(){Object.keys(this.price).length&&(this.paramDto=JSON.parse(JSON.stringify(this.price)))},validForm:function(){var e=this;this.$refs.priceForm.validate(function(t){t?e.$emit("submit",e.paramDto):e.$emit("error")})}}),created:function(){this.getPriceTypeNames(),this.init()}},p=c,u=a("2877"),d=Object(u["a"])(p,n,o,!1,null,null,null);d.options.__file="priceTypeForm.vue";var m=d.exports,f=a("d06a"),b={name:"",components:{priceTypeForm:m},data:function(){return{paramDto:{name:"",status:"",page:1,limit:10},priceTypeStatus:[{label:"有效",value:1},{label:"无效",value:0}],columns:[{title:"名称",key:"channelName"},{title:"价格类型代码",key:"typeCode"},{title:"绑定门市价",slot:"isBindCounterPrice"},{title:"隐藏房价",slot:"isHideHousePrice"},{title:"保留整数",slot:"isKeepInt"},{title:"绑定比率",key:"bindRate",render:function(e,t){return e("div",t.row.bindRate?"".concat(t.row.bindRate," %"):"-")}},{title:"状态",slot:"status"},{title:"操作",slot:"action",width:200}],loading:!1,priceTypeList:[],total:0,title:"",priceVisible:!1,priceLoading:!0,row:{}}},methods:{listPriceType:function(){this.paramDto.page=1,this.handlePageChange()},handlePageChange:function(){var e=this;this.loading=!0,Object(f["d"])(this.paramDto).then(function(t){e.priceTypeList=t.body.rows,e.total=t.body.total,e.loading=!1}).catch(function(){e.loading=!1})},addPriceType:function(){this.title="添加房价类型",this.row={},this.priceVisible=!0},updatePriceType:function(e){this.title="修改房价类型",this.row=e,this.priceVisible=!0},validForm:function(){this.$refs.priceTypeForm.validForm()},addOrUpdatePriceType:function(e){var t=this;Object(f["a"])(e).then(function(){t.$Message.success("保存成功"),t.priceVisible=!1,t.handlePageChange()}).catch(function(){t.handleError()})},handleError:function(){var e=this;setTimeout(function(){e.priceLoading=!1,e.$nextTick(function(){e.priceLoading=!0})},500)},confirmSetIsInvalid:function(e){var t=this,a=0,i="";1===e.status?(a=0,i="确定将改价格类型置为 无效 状态吗？"):(a=1,i="确定将改价格类型置为 有效 状态吗？"),this.$Modal.confirm({title:"通知",content:"<p>"+i+"</p>",onOk:function(){Object(f["e"])(e.fid,a).then(function(e){t.$Message.success("操作成功"),t.handlePageChange()})},onCancel:function(){}})},confirmGeneratePrice:function(e){var t=this;this.$Modal.confirm({title:"通知",content:"<p>确定生成房价吗？</p>",onOk:function(){Object(f["b"])({fid:e.fid}).then(function(e){t.$Message.success("价格生成成功"),t.priceVisible=!1,t.handlePageChange()})},onCancel:function(){}})}},created:function(){this.listPriceType()},filters:{yesOrNoFilter:function(e){return 1===e?"是":"否"}}},y=b,v=(a("323e"),Object(u["a"])(y,i,r,!1,null,"001869dd",null));v.options.__file="priceTypeList.vue";t["default"]=v.exports}}]);