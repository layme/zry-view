(window['webpackJsonp'] = window['webpackJsonp'] || []).push([['chunk-6863b128'], { '2f50': function (t, a, e) { 'use strict'; var i = e('336a'), n = e.n(i); n.a }, '336a': function (t, a, e) {}, '345b': function (t, a, e) { 'use strict'; e.r(a); var i = function () { var t = this, a = t.$createElement, e = t._self._c || a; return e('div', [e('search-list', { on: { search: t.listRefund } }), e('img-config', { attrs: { n: t.imgConfigN, fid: t.fid } }), e('Table', { staticClass: 'my-table', attrs: { stripe: '', columns: t.columns, data: t.data, loading: t.loading }, scopedSlots: t._u([{ key: 'picConfig', fn: function (a) { var i = a.row; return [e('a', { staticClass: 'my-btn', on: { click: function (a) { t.configPic(i) } } }, [t._v('配置')])] } }, { key: 'marketConfig', fn: function (a) { a.row; return [e('a', [t._v('配置')])] } }, { key: 'serviceConfig', fn: function (a) { a.row; return [e('a', [t._v('配置')])] } }, { key: 'projectPanoramicUrl', fn: function (a) { var i = a.row; return [e('a', [t._v(t._s(i.projectPanoramicUrl ? '修改' : '配置'))])] } }, { key: 'projectShareUrl', fn: function (a) { var i = a.row; return [e('a', [t._v(t._s(i.projectShareUrl ? '修改' : '配置'))])] } }, { key: 'houseType', fn: function (a) { a.row; return [e('a', [t._v('配置')])] } }]) }), e('Page', { staticClass: 'my-page', attrs: { total: t.total, 'show-total': '', current: t.paramDto.page, 'page-size': t.paramDto.limit }, on: { 'update:current': function (a) { t.$set(t.paramDto, 'page', a) }, 'on-change': t.getpageList } })], 1) }, n = [], o = (e('f751'), e('cadf'), e('551c'), e('097d'), function () { var t = this, a = t.$createElement, e = t._self._c || a; return e('Form', { attrs: { model: t.searchData, 'label-width': 70 } }, [e('Row', { attrs: { gutter: 20 } }, [e('Col', { attrs: { span: '8' } }, [e('FormItem', { attrs: { label: '项目名称' } }, [e('Input', { attrs: { placeholder: '', clearable: '' }, nativeOn: { keyup: function (a) { return 'button' in a || !t._k(a.keyCode, 'enter', 13, a.key, 'Enter') ? t.submit(a) : null } }, model: { value: t.searchData.projectName, callback: function (a) { t.$set(t.searchData, 'projectName', typeof a === 'string' ? a.trim() : a) }, expression: 'searchData.projectName' } })], 1)], 1)], 1), e('Row', { attrs: { gutter: 20 } }, [e('Col', { attrs: { span: '12' } }, [e('Button', { attrs: { type: 'primary', icon: 'ios-search' }, on: { click: t.submit } }, [t._v(' 查 询')])], 1)], 1)], 1) }), r = [], s = { data: function () { return { searchData: { projectName: '' } } }, methods: { submit: function () { this.$emit('search', this.searchData) } } }, l = s, c = (e('2f50'), e('2877')), d = Object(c['a'])(l, o, r, !1, null, '15c2b2aa', null); d.options.__file = 'searchList.vue'; var u = d.exports, f = function () { var t = this, a = t.$createElement, e = t._self._c || a; return e('div', [e('Modal', { attrs: { loading: t.loading, 'mask-closable': !1 }, on: { 'on-ok': t.ok }, model: { value: t.isShow, callback: function (a) { t.isShow = a }, expression: 'isShow' } }, [e('h3', { staticClass: 'modal-header', attrs: { slot: 'header' }, slot: 'header' }, [t._v('图片配置')]), e('Row', { staticClass: 'row' }, [e('Col', { attrs: { span: '4' } }, [e('span', { staticStyle: { color: '#ed4014' } }, [t._v('*')]), t._v('排序')]), e('Col', { attrs: { span: '13' } }, [e('span', { staticStyle: { color: '#ed4014' } }, [t._v('*')]), t._v('标签文本')]), e('Col', { attrs: { span: '3' } }, [e('span', { staticStyle: { color: '#ed4014' } }, [t._v('*')]), t._v('标签图片')]), e('Col', { attrs: { span: '4' } }, [t._v('操作')])], 1), t._l(t.data, function (a, i) { return e('Row', { key: a.fid, staticClass: 'row' }, [e('Col', { attrs: { span: '4' } }, [e('InputNumber', { attrs: { min: 1 }, model: { value: a.labelOrder, callback: function (e) { t.$set(a, 'labelOrder', e) }, expression: 'item.labelOrder' } })], 1), e('Col', { attrs: { span: '13' } }, [e('Input', { staticClass: 'width85', model: { value: a.labelName, callback: function (e) { t.$set(a, 'labelName', e) }, expression: 'item.labelName' } })], 1), e('Col', { attrs: { span: '3' } }, [e('a', { on: { click: function (e) { e.stopPropagation(), t.uploadImg(a) } } }, [t._v('配置')])]), e('Col', { attrs: { span: '4' } }, [e('a', { on: { click: function (e) { e.stopPropagation(), t.deleteItem(a, i) } } }, [t._v('删除')])])], 1) }), e('div', { staticClass: 'mt20' }, [e('a', { on: { click: function (a) { return a.stopPropagation(), t.addItem(a) } } }, [t._v('+ 添加')])]), e('img-upload', { attrs: { n: t.uploadN, fid: t.labelFid, labelOrder: t.labelOrder, pics: t.pics }, on: { pic: t.pic } })], 2)], 1) }, p = [], h = (e('ac6a'), e('6b54'), e('c5f6'), function () { var t = this, a = t.$createElement, e = t._self._c || a; return e('div', [e('Modal', { attrs: { loading: t.loading, 'mask-closable': !1, 'class-name': t.z100000 }, model: { value: t.isShow, callback: function (a) { t.isShow = a }, expression: 'isShow' } }, [e('h3', { staticClass: 'modal-header', attrs: { slot: 'header' }, slot: 'header' }, [t._v('图片上传')]), e('div', { staticStyle: { display: 'flex', 'flex-wrap': 'wrap' } }, [t._l(t.data, function (a) { return t.data ? [e('div', { staticClass: 'fileItem' }, [e('div', { staticStyle: { 'margin-bottom': '10px' } }, [e('img', { staticClass: 'file-img', attrs: { src: a.attachmentImgUrl, alt: '' } }), e('a', { staticStyle: { 'vertical-align': 'bottom' }, attrs: { href: 'javascript:;' }, on: { click: function (e) { t.deleteItem(a) } } }, [t._v('删除')])])])] : t._e() }), e('div', { staticClass: 'fileItem' }, [e('Upload', { staticClass: 'upload', attrs: { action: t.uploadPicUrl, 'on-success': t.handleSuccess, headers: { Authorization: t.$store.state.user.token }, 'show-upload-list': !1, 'on-error': t.handleError, format: ['jpg', 'jpeg', 'png'], 'on-format-error': t.formatError } }, [e('Icon', { staticStyle: { 'vertical-align': 'middle' }, attrs: { type: 'ios-plus-empty', size: '80' } })], 1)], 1)], 2)])], 1) }), m = [], g = { name: 'ImgUpload', props: { n: { type: Number, default: 0 }, fid: { type: String, default: '' }, labelOrder: { type: Number, default: 0 }, pics: { type: Array, default: function () { return [] } } }, watch: { n: function () { this.data = [], this.pics.length > 0 && (this.data = this.pics), this.labelgetConfigImg(), this.isShow = !0 } }, data: function () { return { isShow: !1, data: [], loading: !0, z100000: 'z100000', num: 1, uploadPicUrl: this.$store.state.app.baseUrl + '/system/upLoadImg.action' } }, methods: { formatError: function () { this.$Message.info('请上传图片类型文件') }, handleError: function () {}, handleSuccess: function (t) { var a = { attachmentImgUrl: t.body.attachmentImgUrl, moduleFid: this.fid, type: 1, order: this.labelOrder }; this.fid || this.data.push(a) }, changeLoading: function () { var t = this; this.loading = !1, this.$nextTick(function () { t.loading = !0 }) }, deleteItem: function (t) { if (this.data.length <= this.num) return this.$Message.error('至少保留' + this.num + '张图片'), void this.changeLoading(); if (!this.fid) return this.data = this.data.filter(function (a) { return a.attachmentImgUrl !== t.attachmentImgUrl }), void this.changeLoading(); t.fid }, labelgetConfigImg: function () { if (this.fid) this.fid } }, created: function () {} }, b = g, v = (e('e50d'), Object(c['a'])(b, h, m, !1, null, '60f7e9b8', null)); v.options.__file = 'ImgUpload.vue'; var w = v.exports, y = e('90de'), _ = { name: 'ImgConfig', components: { ImgUpload: w }, props: { n: { type: Number, default: 0 }, fid: { type: String, default: '' }, projectFid: { type: String, default: '' } }, watch: { n: function () { this.labellist(), this.isShow = !0 } }, data: function () { return { uploadN: 0, isShow: !1, data: [], loading: !0, labelOrder: 0, labelFid: '', pics: [] } }, methods: { ok: function () {}, uploadImg: function (t) { this.pics = []; var a = t.labelOrder; if (a) if ((+a).toString() !== 'NaN' && Object(y['g'])('Number', +a)) { var e = this.data.filter(function (t) { return t.labelOrder === a }); e && e.length > 1 ? this.$Message.info('排序字段不能重复') : (t.picUrl && (this.pics = t.picUrl), this.labelFid = t.fid, this.labelOrder = a, this.uploadN++) } else this.$Message.info('排序字段为数字'); else this.$Message.info('请先添加排序') }, deleteItem: function (t, a) { var e = this; this.$Modal.confirm({ content: '<p>确认删除？</p>', onOk: function () { t.fid || e.data.splice(a, 1) } }) }, addItem: function () { var t = 1; this.data.length > 0 && (t = this.data[this.data.length - 1].labelOrder, t = (+t).toString() !== 'NaN' && Object(y['g'])('Number', +t) ? parseInt(t) + 1 : this.data.length + 1), this.data.push({ labelOrder: t, labelName: '', picUrl: [], labelType: 0 }) }, labellist: function () {}, pic: function (t) { if (!(t.length < 1)) { this.pics = []; var a = t[0].order, e = this.data.filter(function (t) { return t.labelOrder === a }); e[0].picUrl = [], t.forEach(function (t) { e[0].picUrl.push(t) }) } } }, created: function () {} }, C = _, j = (e('70b5'), Object(c['a'])(C, f, p, !1, null, '62f76064', null)); j.options.__file = 'ImgConfig.vue'; var k = j.exports, I = e('42ce'), S = { name: 'projectConfigIndex', components: { searchList: u, ImgConfig: k }, data: function () { return { loading: !1, imgConfigN: 0, fid: '', paramDto: { page: 1, limit: 10 }, columns: [{ title: '项目名称', key: 'projectName', tooltip: !0 }, { title: '图片配置', slot: 'picConfig' }, { title: '营销标签', slot: 'marketConfig' }, { title: '服务配置', slot: 'serviceConfig' }, { title: 'VR看房', slot: 'projectPanoramicUrl' }, { title: '分享链接', slot: 'projectShareUrl' }, { title: '房型内容', slot: 'houseType' }], data: [{ fid: '8a9093ad6a4aef21016a4d4d07aa000f', projectFid: '8a9093ad6a4aef21016a4d4d06cb000e', projectName: '北京建国门和平自如寓', projectPanoramicUrl: 'www.baidu.com', projectShareUrl: 'www.baidu.com' }, { fid: '8a9093ad6a0a7d7f016a0a7d7f760001', projectFid: '8a9093ad6a0a7d7f016a0a7d7f520000', projectName: '虾米测试下', projectPanoramicUrl: '', projectShareUrl: '' }, { fid: '8a908f0767ef44be0168195d2c7100d9', projectFid: '8a908f0767ef44be0168195d2c3600d8', projectName: '深圳龙华筑梦自如寓', projectPanoramicUrl: 'www.baidu.com', projectShareUrl: 'www.baidu.com' }], total: 0 } }, methods: { listRefund: function (t) { Object.assign(this.paramDto, t), this.paramDto.page = 1, this.getpageList() }, getpageList: function () { var t = this; this.loading = !0, Object(I['f'])(this.paramDto).then(function (a) { a.body && (t.data = a.body.rows, t.total = a.body.total, t.loading = !1) }).catch(function () { t.loading = !1 }) }, configPic: function (t) { this.imgConfigN++, this.fid = t.fid } }, created: function () {} }, U = S, N = (e('b784'), Object(c['a'])(U, i, n, !1, null, '366e090f', null)); N.options.__file = 'projectConfigIndex.vue'; a['default'] = N.exports }, '5e08': function (t, a, e) {}, '67d6': function (t, a, e) {}, '70b5': function (t, a, e) { 'use strict'; var i = e('67d6'), n = e.n(i); n.a }, 7346: function (t, a, e) {}, b784: function (t, a, e) { 'use strict'; var i = e('7346'), n = e.n(i); n.a }, e50d: function (t, a, e) { 'use strict'; var i = e('5e08'), n = e.n(i); n.a } }])
